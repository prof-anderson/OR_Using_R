<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 More Integer Programming Models | Optimization Modeling Using R</title>
  <meta name="description" content="This book introduces optimization using R." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 More Integer Programming Models | Optimization Modeling Using R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book introduces optimization using R." />
  <meta name="github-repo" content="prof-anderson/OR_Using_R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 More Integer Programming Models | Optimization Modeling Using R" />
  
  <meta name="twitter:description" content="This book introduces optimization using R." />
  

<meta name="author" content="Timothy R. Anderson" />


<meta name="date" content="2021-12-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="mixed-integer-optimization.html"/>
<link rel="next" href="goal-programming.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Optimization Modeling Using R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#intended-audience"><i class="fa fa-check"></i>Intended Audience</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#features-of-this-book"><i class="fa fa-check"></i>Features of this Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#instructor-notes"><i class="fa fa-check"></i>Instructor Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowldegements"><i class="fa fa-check"></i>Acknowldegements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-operations-research"><i class="fa fa-check"></i><b>1.1</b> What is Operations Research</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#purpose-of-this-book"><i class="fa fa-check"></i><b>1.2</b> Purpose of this Book</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#range-of-operations-research-techniques"><i class="fa fa-check"></i><b>1.3</b> Range of Operations Research Techniques</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#relationship-between-operations-research-and-analytics"><i class="fa fa-check"></i><b>1.4</b> Relationship between Operations Research and Analytics</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#importance-of-optimization"><i class="fa fa-check"></i><b>1.5</b> Importance of Optimization</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.6</b> Why R?</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#conventions-used-in-this-book"><i class="fa fa-check"></i><b>1.7</b> Conventions Used in this Book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html"><i class="fa fa-check"></i><b>2</b> Introduction to Linear Programming</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#what-is-linear-programming"><i class="fa fa-check"></i><b>2.1</b> What is Linear Programming</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#two-variable-base-case"><i class="fa fa-check"></i><b>2.2</b> Two Variable Base Case</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#graphically-solving-a-linear-program"><i class="fa fa-check"></i><b>2.3</b> Graphically Solving a Linear Program</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#implementing-and-solving-with-ompr"><i class="fa fa-check"></i><b>2.4</b> Implementing and Solving with <code>ompr</code></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#preparing-to-implement-the-linear-program"><i class="fa fa-check"></i><b>2.4.1</b> Preparing to Implement the Linear Program</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#implementing-the-base-case-with-piping"><i class="fa fa-check"></i><b>2.4.2</b> Implementing the Base Case with Piping</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#adding-a-third-product-variable"><i class="fa fa-check"></i><b>2.5</b> Adding a Third Product (Variable)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#three-variable-base-case-formulation"><i class="fa fa-check"></i><b>2.5.1</b> Three Variable Base Case Formulation</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#three-variable-base-case-implementation"><i class="fa fa-check"></i><b>2.5.2</b> Three Variable Base Case Implementation</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#three-variable-case-results-and-interpretation"><i class="fa fa-check"></i><b>2.5.3</b> Three Variable Case Results and Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#linear-programming-special-cases"><i class="fa fa-check"></i><b>2.6</b> Linear Programming Special Cases</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#case-1-no-feasible-solution"><i class="fa fa-check"></i><b>2.6.1</b> Case 1: No Feasible Solution</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#case-2-multiple-optima"><i class="fa fa-check"></i><b>2.6.2</b> Case 2: Multiple Optima</a></li>
<li class="chapter" data-level="2.6.3" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#case-3-redundant-constraint"><i class="fa fa-check"></i><b>2.6.3</b> Case 3: Redundant Constraint</a></li>
<li class="chapter" data-level="2.6.4" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#case-4-unbounded-solution"><i class="fa fa-check"></i><b>2.6.4</b> Case 4: Unbounded Solution</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#abstracting-the-production-planning-model"><i class="fa fa-check"></i><b>2.7</b> Abstracting the Production Planning Model</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#methods-of-solving-linear-programs"><i class="fa fa-check"></i><b>2.8</b> Methods of Solving Linear Programs</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-linear-programming.html"><a href="introduction-to-linear-programming.html#exercises"><i class="fa fa-check"></i><b>2.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html"><i class="fa fa-check"></i><b>3</b> More Linear Programming Models</a>
<ul>
<li class="chapter" data-level="3.1" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#types-of-lp-models"><i class="fa fa-check"></i><b>3.1</b> Types of LP Models</a></li>
<li class="chapter" data-level="3.2" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#the-algebraic-model"><i class="fa fa-check"></i><b>3.2</b> The Algebraic Model</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#tips-and-conventions-for-algebraic-models"><i class="fa fa-check"></i><b>3.2.1</b> Tips and Conventions for Algebraic Models</a></li>
<li class="chapter" data-level="3.2.2" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#building-the-generalized-model-in-r"><i class="fa fa-check"></i><b>3.2.2</b> Building the Generalized Model in R</a></li>
<li class="chapter" data-level="3.2.3" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#examining-the-results"><i class="fa fa-check"></i><b>3.2.3</b> Examining the Results</a></li>
<li class="chapter" data-level="3.2.4" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#changing-the-model"><i class="fa fa-check"></i><b>3.2.4</b> Changing the Model</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#common-linear-programming-applications"><i class="fa fa-check"></i><b>3.3</b> Common Linear Programming Applications</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#blending-problems"><i class="fa fa-check"></i><b>3.3.1</b> Blending Problems</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#allocation-models"><i class="fa fa-check"></i><b>3.4</b> Allocation Models</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#covering-models"><i class="fa fa-check"></i><b>3.4.1</b> Covering Models</a></li>
<li class="chapter" data-level="3.4.2" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#transportation-models"><i class="fa fa-check"></i><b>3.4.2</b> Transportation Models</a></li>
<li class="chapter" data-level="3.4.3" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#transshipment-models"><i class="fa fa-check"></i><b>3.4.3</b> Transshipment Models</a></li>
<li class="chapter" data-level="3.4.4" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#production-and-inventory-planning"><i class="fa fa-check"></i><b>3.4.4</b> Production and Inventory Planning</a></li>
<li class="chapter" data-level="3.4.5" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#standard-form"><i class="fa fa-check"></i><b>3.4.5</b> Standard Form</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#vector-and-matrix-forms-of-lps"><i class="fa fa-check"></i><b>3.5</b> Vector and Matrix Forms of LPs</a></li>
<li class="chapter" data-level="3.6" data-path="more-linear-programming-models.html"><a href="more-linear-programming-models.html#exercises-1"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>4</b> Sensitivity Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#base-case"><i class="fa fa-check"></i><b>4.1</b> Base Case</a></li>
<li class="chapter" data-level="4.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#shadow-prices"><i class="fa fa-check"></i><b>4.2</b> Shadow Prices</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#extraction-and-interpretation"><i class="fa fa-check"></i><b>4.2.1</b> Extraction and Interpretation</a></li>
<li class="chapter" data-level="4.2.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#example-of-adding-an-hour-to-assembly"><i class="fa fa-check"></i><b>4.2.2</b> Example of Adding an Hour to Assembly</a></li>
<li class="chapter" data-level="4.2.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#shadow-prices-of-underutilized-resources"><i class="fa fa-check"></i><b>4.2.3</b> Shadow Prices of Underutilized Resources</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#reduced-costs-of-variables"><i class="fa fa-check"></i><b>4.3</b> Reduced Costs of Variables</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#reduced-cost-of-ants"><i class="fa fa-check"></i><b>4.3.1</b> Reduced Cost of Ants</a></li>
<li class="chapter" data-level="4.3.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#reduced-price-of-bats"><i class="fa fa-check"></i><b>4.3.2</b> Reduced Price of Bats</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#using-sensitivity-analysis-to-evaluate-a-new-product"><i class="fa fa-check"></i><b>4.4</b> Using Sensitivity Analysis to Evaluate a New Product</a></li>
<li class="chapter" data-level="4.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#exercises-2"><i class="fa fa-check"></i><b>4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html"><i class="fa fa-check"></i><b>5</b> Data Envelopment Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#creating-the-data"><i class="fa fa-check"></i><b>5.2</b> Creating the Data</a></li>
<li class="chapter" data-level="5.3" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#graphical-analysis"><i class="fa fa-check"></i><b>5.3</b> Graphical Analysis</a></li>
<li class="chapter" data-level="5.4" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#the-linear-programs-for-dea"><i class="fa fa-check"></i><b>5.4</b> The Linear Programs for DEA</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#an-explicit-linear-program-for-dea"><i class="fa fa-check"></i><b>5.4.1</b> An Explicit Linear Program for DEA</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#a-generalized-linear-program-for-dea"><i class="fa fa-check"></i><b>5.4.2</b> A Generalized Linear Program for DEA</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#creating-the-lp---the-algebraic-approach"><i class="fa fa-check"></i><b>5.5</b> Creating the LP - The Algebraic Approach</a></li>
<li class="chapter" data-level="5.6" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#returns-to-scale"><i class="fa fa-check"></i><b>5.6</b> Returns to Scale</a></li>
<li class="chapter" data-level="5.7" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#multiple-inputs-and-multiple-outputs"><i class="fa fa-check"></i><b>5.7</b> Multiple Inputs and Multiple Outputs</a></li>
<li class="chapter" data-level="5.8" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#extracting-multiplier-weights-from-sensitivity-analysis"><i class="fa fa-check"></i><b>5.8</b> Extracting Multiplier Weights from Sensitivity Analysis</a></li>
<li class="chapter" data-level="5.9" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#slack-maximization"><i class="fa fa-check"></i><b>5.9</b> Slack Maximization</a></li>
<li class="chapter" data-level="5.10" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#dea-packages"><i class="fa fa-check"></i><b>5.10</b> DEA Packages</a></li>
<li class="chapter" data-level="5.11" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#dea-model-building"><i class="fa fa-check"></i><b>5.11</b> DEA Model Building</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#selection-of-inputs-and-outputs"><i class="fa fa-check"></i><b>5.11.1</b> Selection of Inputs and Outputs</a></li>
<li class="chapter" data-level="5.11.2" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#model-choices"><i class="fa fa-check"></i><b>5.11.2</b> Model Choices</a></li>
<li class="chapter" data-level="5.11.3" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#application-area-expertise"><i class="fa fa-check"></i><b>5.11.3</b> Application Area Expertise</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#further-reading"><i class="fa fa-check"></i><b>5.12</b> Further Reading</a></li>
<li class="chapter" data-level="5.13" data-path="data-envelopment-analysis.html"><a href="data-envelopment-analysis.html#exercises-3"><i class="fa fa-check"></i><b>5.13</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html"><i class="fa fa-check"></i><b>6</b> Mixed Integer Optimization</a>
<ul>
<li class="chapter" data-level="6.1" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#example-of-minor-integrality-impact"><i class="fa fa-check"></i><b>6.1</b> Example of Minor Integrality Impact</a></li>
<li class="chapter" data-level="6.2" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#example-of-major-integality-impact"><i class="fa fa-check"></i><b>6.2</b> Example of Major Integality Impact</a></li>
<li class="chapter" data-level="6.3" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#the-branch-and-bound-algorithm"><i class="fa fa-check"></i><b>6.3</b> The Branch and Bound Algorithm</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#the-lp-relaxation"><i class="fa fa-check"></i><b>6.3.1</b> The LP Relaxation</a></li>
<li class="chapter" data-level="6.3.2" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-i"><i class="fa fa-check"></i><b>6.3.2</b> Subproblem I</a></li>
<li class="chapter" data-level="6.3.3" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-iii"><i class="fa fa-check"></i><b>6.3.3</b> Subproblem III</a></li>
<li class="chapter" data-level="6.3.4" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-iv"><i class="fa fa-check"></i><b>6.3.4</b> Subproblem IV</a></li>
<li class="chapter" data-level="6.3.5" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-v"><i class="fa fa-check"></i><b>6.3.5</b> Subproblem V</a></li>
<li class="chapter" data-level="6.3.6" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-vi"><i class="fa fa-check"></i><b>6.3.6</b> Subproblem VI</a></li>
<li class="chapter" data-level="6.3.7" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-vii"><i class="fa fa-check"></i><b>6.3.7</b> Subproblem VII</a></li>
<li class="chapter" data-level="6.3.8" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-viii"><i class="fa fa-check"></i><b>6.3.8</b> Subproblem VIII</a></li>
<li class="chapter" data-level="6.3.9" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#subproblem-ii"><i class="fa fa-check"></i><b>6.3.9</b> Subproblem II</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#computational-complexity"><i class="fa fa-check"></i><b>6.4</b> Computational Complexity</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#full-enumeration"><i class="fa fa-check"></i><b>6.4.1</b> Full Enumeration</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#binary-variables-and-logical-relations"><i class="fa fa-check"></i><b>6.5</b> Binary Variables and Logical Relations</a></li>
<li class="chapter" data-level="6.6" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#fixed-charge-models"><i class="fa fa-check"></i><b>6.6</b> Fixed Charge Models</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#fixed-charge-example-introduction"><i class="fa fa-check"></i><b>6.6.1</b> Fixed Charge Example-Introduction</a></li>
<li class="chapter" data-level="6.6.2" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#linking-constraints-with-big-m"><i class="fa fa-check"></i><b>6.6.2</b> Linking Constraints with “Big M”</a></li>
<li class="chapter" data-level="6.6.3" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#fixed-charge-implementation"><i class="fa fa-check"></i><b>6.6.3</b> Fixed Charge Implementation</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="mixed-integer-optimization.html"><a href="mixed-integer-optimization.html#model-results-and-interpretation"><i class="fa fa-check"></i><b>6.7</b> Model Results and Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html"><i class="fa fa-check"></i><b>7</b> More Integer Programming Models</a>
<ul>
<li class="chapter" data-level="7.1" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#overview"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#revisiting-the-warehouse-location-problem"><i class="fa fa-check"></i><b>7.2</b> Revisiting the Warehouse Location Problem</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#implementing-the-warehouse-model"><i class="fa fa-check"></i><b>7.2.1</b> Implementing the Warehouse Model</a></li>
<li class="chapter" data-level="7.2.2" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#solving-the-warehouse-location-problem"><i class="fa fa-check"></i><b>7.2.2</b> Solving the Warehouse Location Problem</a></li>
<li class="chapter" data-level="7.2.3" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#warehouse-discussion"><i class="fa fa-check"></i><b>7.2.3</b> Warehouse Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#solving-mips-with-different-solvers"><i class="fa fa-check"></i><b>7.3</b> Solving MIPs with Different Solvers</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#performance-of-glpk"><i class="fa fa-check"></i><b>7.3.1</b> Performance of <code>glpk</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#performance-of-symphony"><i class="fa fa-check"></i><b>7.3.2</b> Performance of <code>symphony</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#performance-of-lpsolve"><i class="fa fa-check"></i><b>7.3.3</b> Performance of <code>lpsolve</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#performance-of-gurobi"><i class="fa fa-check"></i><b>7.3.4</b> Performance of <code>gurobi</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#comparing-results-across-solvers"><i class="fa fa-check"></i><b>7.3.5</b> Comparing Results across Solvers</a></li>
<li class="chapter" data-level="7.3.6" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#popularity-of-lp-solvers"><i class="fa fa-check"></i><b>7.3.6</b> Popularity of LP Solvers</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#solving-sudoku-puzzles-using-optimization"><i class="fa fa-check"></i><b>7.4</b> Solving Sudoku Puzzles using Optimization</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#introduction-to-sudoku-and-optimization"><i class="fa fa-check"></i><b>7.4.1</b> Introduction to Sudoku and Optimization</a></li>
<li class="chapter" data-level="7.4.2" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#formulating-the-sudoku-problem"><i class="fa fa-check"></i><b>7.4.2</b> Formulating the Sudoku Problem</a></li>
<li class="chapter" data-level="7.4.3" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#implementing-sudoku-in-ompr"><i class="fa fa-check"></i><b>7.4.3</b> Implementing Sudoku in ompr</a></li>
<li class="chapter" data-level="7.4.4" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#sudoku-discussion"><i class="fa fa-check"></i><b>7.4.4</b> Sudoku Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#exercises-4"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
<li class="chapter" data-level="7.6" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#production-planning-over-time"><i class="fa fa-check"></i><b>7.6</b> Production Planning over Time</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#implementing-the-model-1"><i class="fa fa-check"></i><b>7.6.1</b> Implementing the Model</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="more-integer-programming-models.html"><a href="more-integer-programming-models.html#additional-exercises"><i class="fa fa-check"></i><b>7.7</b> Additional Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="goal-programming.html"><a href="goal-programming.html"><i class="fa fa-check"></i><b>8</b> Goal Programming</a>
<ul>
<li class="chapter" data-level="8.1" data-path="goal-programming.html"><a href="goal-programming.html#introduction-2"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="goal-programming.html"><a href="goal-programming.html#preemptive-goal-programming"><i class="fa fa-check"></i><b>8.2</b> Preemptive Goal Programming</a></li>
<li class="chapter" data-level="8.3" data-path="goal-programming.html"><a href="goal-programming.html#policies-for-houselessness"><i class="fa fa-check"></i><b>8.3</b> Policies for Houselessness</a></li>
<li class="chapter" data-level="8.4" data-path="goal-programming.html"><a href="goal-programming.html#mass-mailings"><i class="fa fa-check"></i><b>8.4</b> Mass Mailings</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="goal-programming.html"><a href="goal-programming.html#formulating-the-state-mailing-model"><i class="fa fa-check"></i><b>8.4.1</b> Formulating the State Mailing Model</a></li>
<li class="chapter" data-level="8.4.2" data-path="goal-programming.html"><a href="goal-programming.html#implementing-the-state-mailing-model"><i class="fa fa-check"></i><b>8.4.2</b> Implementing the State Mailing Model</a></li>
<li class="chapter" data-level="8.4.3" data-path="goal-programming.html"><a href="goal-programming.html#frontloading-the-work"><i class="fa fa-check"></i><b>8.4.3</b> Frontloading the Work</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="goal-programming.html"><a href="goal-programming.html#exercises-5"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="a-very-brief-introduction-to-r.html"><a href="a-very-brief-introduction-to-r.html"><i class="fa fa-check"></i><b>A</b> A Very Brief Introduction to R</a>
<ul>
<li class="chapter" data-level="A.1" data-path="a-very-brief-introduction-to-r.html"><a href="a-very-brief-introduction-to-r.html#purpose"><i class="fa fa-check"></i><b>A.1</b> Purpose</a></li>
<li class="chapter" data-level="A.2" data-path="a-very-brief-introduction-to-r.html"><a href="a-very-brief-introduction-to-r.html#getting-started-with-r"><i class="fa fa-check"></i><b>A.2</b> Getting Started with R</a></li>
<li class="chapter" data-level="A.3" data-path="a-very-brief-introduction-to-r.html"><a href="a-very-brief-introduction-to-r.html#exercises-6"><i class="fa fa-check"></i><b>A.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html"><i class="fa fa-check"></i><b>B</b> Introduction to Math Notation</a>
<ul>
<li class="chapter" data-level="B.1" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#purpose-1"><i class="fa fa-check"></i><b>B.1</b> Purpose</a></li>
<li class="chapter" data-level="B.2" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#basic-summation-notation"><i class="fa fa-check"></i><b>B.2</b> Basic Summation Notation</a></li>
<li class="chapter" data-level="B.3" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#using-latex-in-rmarkdown"><i class="fa fa-check"></i><b>B.3</b> Using LaTeX in RMarkdown</a></li>
<li class="chapter" data-level="B.4" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#inline-notation"><i class="fa fa-check"></i><b>B.4</b> Inline Notation</a></li>
<li class="chapter" data-level="B.5" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#sums"><i class="fa fa-check"></i><b>B.5</b> Sums</a></li>
<li class="chapter" data-level="B.6" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#delimiters"><i class="fa fa-check"></i><b>B.6</b> Delimiters</a></li>
<li class="chapter" data-level="B.7" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#summary-of-mathematical-notations"><i class="fa fa-check"></i><b>B.7</b> Summary of Mathematical Notations</a></li>
<li class="chapter" data-level="B.8" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#sequences-and-summation-notation"><i class="fa fa-check"></i><b>B.8</b> Sequences and Summation Notation</a></li>
<li class="chapter" data-level="B.9" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#applications-of-summation"><i class="fa fa-check"></i><b>B.9</b> Applications of Summation</a></li>
<li class="chapter" data-level="B.10" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#double-summation"><i class="fa fa-check"></i><b>B.10</b> Double Summation</a></li>
<li class="chapter" data-level="B.11" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#applications-of-double-summation"><i class="fa fa-check"></i><b>B.11</b> Applications of Double Summation</a></li>
<li class="chapter" data-level="B.12" data-path="introduction-to-math-notation.html"><a href="introduction-to-math-notation.html#exercises-7"><i class="fa fa-check"></i><b>B.12</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>C</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="C.1" data-path="troubleshooting.html"><a href="troubleshooting.html#overview-1"><i class="fa fa-check"></i><b>C.1</b> Overview</a></li>
<li class="chapter" data-level="C.2" data-path="troubleshooting.html"><a href="troubleshooting.html#model-building"><i class="fa fa-check"></i><b>C.2</b> Model Building</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#define-and-formulate-before-implementing"><i class="fa fa-check"></i><b>C.2.1</b> Define and Formulate before Implementing</a></li>
<li class="chapter" data-level="C.2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#failing-to-look-for-past-optimization-models"><i class="fa fa-check"></i><b>C.2.2</b> Failing to Look for Past Optimization Models</a></li>
<li class="chapter" data-level="C.2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#misrendering-of-pdf"><i class="fa fa-check"></i><b>C.2.3</b> Misrendering of PDF</a></li>
<li class="chapter" data-level="C.2.4" data-path="troubleshooting.html"><a href="troubleshooting.html#blank-lines-in-latex"><i class="fa fa-check"></i><b>C.2.4</b> Blank Lines in LaTeX</a></li>
<li class="chapter" data-level="C.2.5" data-path="troubleshooting.html"><a href="troubleshooting.html#problems-with-pdf-creation"><i class="fa fa-check"></i><b>C.2.5</b> Problems with PDF Creation</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="troubleshooting.html"><a href="troubleshooting.html#implementation-troubleshooting"><i class="fa fa-check"></i><b>C.3</b> Implementation Troubleshooting</a>
<ul>
<li class="chapter" data-level="C.3.1" data-path="troubleshooting.html"><a href="troubleshooting.html#errors-in-a-piped-model"><i class="fa fa-check"></i><b>C.3.1</b> Errors in a Piped Model</a></li>
<li class="chapter" data-level="C.3.2" data-path="troubleshooting.html"><a href="troubleshooting.html#undefined-object-in-ompr"><i class="fa fa-check"></i><b>C.3.2</b> Undefined Object in <code>ompr</code></a></li>
<li class="chapter" data-level="C.3.3" data-path="troubleshooting.html"><a href="troubleshooting.html#unexpected-symbol-in-ompr"><i class="fa fa-check"></i><b>C.3.3</b> Unexpected Symbol in <code>ompr</code></a></li>
<li class="chapter" data-level="C.3.4" data-path="troubleshooting.html"><a href="troubleshooting.html#name-conflicts-between-r-and-ompr"><i class="fa fa-check"></i><b>C.3.4</b> Name Conflicts between R and <code>ompr</code></a></li>
<li class="chapter" data-level="C.3.5" data-path="troubleshooting.html"><a href="troubleshooting.html#blindly-reusing-code"><i class="fa fa-check"></i><b>C.3.5</b> Blindly Reusing Code</a></li>
</ul></li>
<li class="chapter" data-level="C.4" data-path="troubleshooting.html"><a href="troubleshooting.html#general-debugging-tips"><i class="fa fa-check"></i><b>C.4</b> General Debugging Tips</a></li>
<li class="chapter" data-level="C.5" data-path="troubleshooting.html"><a href="troubleshooting.html#getting-help"><i class="fa fa-check"></i><b>C.5</b> Getting Help</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="making-good-tables.html"><a href="making-good-tables.html"><i class="fa fa-check"></i><b>D</b> Making Good Tables</a>
<ul>
<li class="chapter" data-level="D.1" data-path="making-good-tables.html"><a href="making-good-tables.html#importance-of-tables-in-modeling"><i class="fa fa-check"></i><b>D.1</b> Importance of Tables in Modeling</a></li>
<li class="chapter" data-level="D.2" data-path="making-good-tables.html"><a href="making-good-tables.html#kable-vs.-kbl"><i class="fa fa-check"></i><b>D.2</b> Kable vs. Kbl</a></li>
<li class="chapter" data-level="D.3" data-path="making-good-tables.html"><a href="making-good-tables.html#table-footnotes-with-kable"><i class="fa fa-check"></i><b>D.3</b> Table Footnotes with Kable</a></li>
<li class="chapter" data-level="D.4" data-path="making-good-tables.html"><a href="making-good-tables.html#setting-row-and-column-names-in-kable"><i class="fa fa-check"></i><b>D.4</b> Setting Row and Column Names in Kable</a></li>
<li class="chapter" data-level="D.5" data-path="making-good-tables.html"><a href="making-good-tables.html#booktabs-vs.-default"><i class="fa fa-check"></i><b>D.5</b> Booktabs vs. Default</a></li>
<li class="chapter" data-level="D.6" data-path="making-good-tables.html"><a href="making-good-tables.html#using-latex-in-kable-column-names"><i class="fa fa-check"></i><b>D.6</b> Using LaTeX in Kable Column Names</a></li>
<li class="chapter" data-level="D.7" data-path="making-good-tables.html"><a href="making-good-tables.html#fitting-tables-to-page-width"><i class="fa fa-check"></i><b>D.7</b> Fitting Tables to Page Width</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Optimization Modeling Using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="more-integer-programming-models" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> More Integer Programming Models</h1>
<pre><code>## 
## Attaching package: &#39;ROI.plugin.lpsolve&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:lpSolveAPI&#39;:
## 
##     read.lp, write.lp</code></pre>
<div id="overview" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Overview</h2>
<p>This chapter consists of a collection of rich MILP models that can be used for inspiration on products.
Some of these cases are expansions of Dirk Schumacher’s <code>ompr</code>vignettes.
These make for excellent resources demonstrating a variety of features such as creation of simulated data and visualization of results.
I strongly recommend reading the original.
These vignettes can be viewed from the package documentation, Dirk Schumacher’s github web <a href="https://dirkschumacher.github.io/ompr/articles/index.html">site</a>, or downloading his github repository.</p>
<ul>
<li>All text from Dirk Schumacher’s articles are set in block quotes.</li>
<li>Code chunks are generally based on Dirk Schumacher’s articles unless stated otherwise.</li>
<li>The LaTeX formulations are generally based on Dirk Schumacher’s LaTeX with some modifications to support LaTeX environments.</li>
</ul>
</div>
<div id="revisiting-the-warehouse-location-problem" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Revisiting the Warehouse Location Problem</h2>
<p>Let’s start by reviewing Dirk’s original description of the warehouse location problem.</p>
<blockquote>
<p>In this article we will look at the <a href="https://en.wikipedia.org/wiki/Facility_location_problem">Warehouse Location Problem</a>.
Given a set of customers and set of locations to build warehouses, the task is to decide where to build warehouses and from what warehouses goods should be shipped to which customer.</p>
<p>Thus there are two decisions that need to made at once: where and if to build warehouses and the assignment of customers to warehouses.
This simple setting also implies that at least one warehouse must be built and that any warehouse is big enough to serve all customers.</p>
<p>As a practical example: you run the logistics for an NGO and want to regularly distribute goods to people in need.
You identified a set of possible locations to set up your distribution hubs, but you are not sure where to build them.
Then such a model might help.
In practice however you might need to incorporate additional constraints into the model.
Let’s start by defining the decision variables.
Each possible location of a warehouse, <span class="math inline">\(j\)</span> can have a warehouse be built or not be built.
We will use <span class="math inline">\(y_j=1\)</span> to indicate that warehouse <span class="math inline">\(j\)</span> is built.
Conversely, <span class="math inline">\(y_j=0\)</span> indicates that we are not building a warehouse at location <span class="math inline">\(j\)</span>.
Since a warehouse is either built or not built, a binary variable is appropriate for <span class="math inline">\(y_j\)</span>.</p>
</blockquote>
<p>Similarly, the variable <span class="math inline">\(x_{i,j}\)</span> is the decision of assigning customer <span class="math inline">\(i\)</span> to warehouse <span class="math inline">\(j\)</span>.
It also needs to be a binary variable since partial assignments are not allowed.
Therefore, <span class="math inline">\(x_{3,7}=1\)</span> means that customer <em>3</em> is assigned to warehouse <em>7</em> and we would expect <span class="math inline">\(x_{3,8}=0\)</span> since a customer can’t be assigned to two warehouses.<br />
</p>
<p>Now, that we have a handle on the variables, let’s move on to the constraints.
Each customer must be assigned to one and only one warehouse.
For illustration, this means that one of the variables <span class="math inline">\(x_{1,j}\)</span> must be set to one and the others are zero.
To enforce this constraint, we can simply add the <span class="math inline">\(x\)</span> variables for warehouse 1 for each of the warehouses.
We could do this with <span class="math inline">\(x_{1,1}+x_{1,2}+ \ldots + x_{1,m}\)</span> and requiring it to be one.
We could rewrite this using a summation as <span class="math inline">\(\sum\limits_{j=1}^{m} x_{1, j} = 1\)</span>.
That constraint is limited to just customer 1 though.
We don’t want to write this constraint out separately for each customer so we can generalize this by repeating it for all <span class="math inline">\(n\)</span> customers as <span class="math inline">\(\sum\limits_{j=1}^{m} x_{i, j} = 1, \&gt; i=1 ,\ldots, n\)</span>.</p>
<p>It would not work to assign a customer to an unbuilt warehouse.
For example, it would not work to have customer 23 assigned to warehouse 7 if warehouse 7 was not built.
In other words, the combination of <span class="math inline">\(x_{23,7}=1\)</span> and <span class="math inline">\(y_7=0\)</span> would be a big problem and should not happen.
We need to connect the decision variable <span class="math inline">\(x_{23,7}\)</span> and <span class="math inline">\(y_7\)</span>.
One way to do that is creating a constraint, <span class="math inline">\(x_{23,7} \leq y_7\)</span> which explicitly blocks assigning customer 23 to warehouse 7 unless warehouse 7 is operating.
This can be generalized as <span class="math inline">\(x_{i, j} \leq y_j, \&gt; i=1 , \ldots, n, \&gt; j=1 ,\ldots, m\)</span>.</p>
<p>Our objective is to minimize cost.
We have a cost assumed for each customer to warehouse assignment.
This might be related to distance.
Let’s refer to this cost as <span class="math inline">\(\operatorname{transportcost}_{i,j}\)</span>.
The cost based on the transportation from warehouse to customer is then <span class="math inline">\(\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{m}\operatorname{transportcost}_{i,j} \cdot x_{i, j}\)</span>.
Note that we could concisely abbreviate it as something like <span class="math inline">\(C_{i,j}^T\)</span>.
In this case, using a capital <em>C</em> to indicate cost and a superscript T to indicate transportation cost.<br />
</p>
<p>We also have a cost factor for each warehouse that we choose to build/operate.
Again, if we define <span class="math inline">\(\operatorname{fixedcost}_{j}\)</span> as the fixed cost for building warehouse <span class="math inline">\(j\)</span>, the cost of our decisions is simply, <span class="math inline">\(\sum\limits_{j=1}^{m}\operatorname{fixedcost}_{j} \cdot y_{j}\)</span>.<br />
</p>
<p>Let’s combine all this together into the formulation.<br />
</p>
<p><span class="math display">\[
\begin{split}
\begin{aligned}
\text{min  } &amp; \displaystyle\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{m}\operatorname{transportcost}_{i,j} \cdot x_{i, j} +  \sum\limits_{j=1}^{m}\operatorname{fixedcost}_{j} \cdot y_{j}&amp; &amp;\\
\text{s.t.  } \; &amp; \displaystyle\sum\limits_{j=1}^{m}   x_{i, j} = 1, \; i=1 ,\ldots, n\\
                 &amp; \displaystyle x_{i, j} \leq y_j,  \; i=1 ,\ldots, n, \; j=1 ,\ldots, m\\
                 &amp; x_{i,j} \in \{0,1\} \; i=1 ,\ldots, n, \; j=1 ,\ldots, m \\
                 &amp;                                                y_{j} \in \{0,1\} \; j=1 ,\ldots, m 
  \end{aligned}
  \end{split}
\]</span></p>
<div id="implementing-the-warehouse-model" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Implementing the Warehouse Model</h3>
<p>Rather than typing in fixed data or loading it from data file, Dirk simply generated a collection of random data for testing purposes.
This highlights the advantage of R in that we have a rich collection of numerical tools available that we can leverage.<br />
</p>
<blockquote>
<p>The first thing we need is the data.
In this article we will simply generate artificial data.</p>
<p>We assume the <strong>customers</strong> are located in a grid with Euclidian distances.
Let’s explain the functions used for this data generation.
The first command sets the random number seed.
In general, computers don’t actually generate random numbers, they generate what is called pseudo random numbers according to a particular algorithm in a sequence.
The starting point will set a sequence that appears to be random and behaves in a relatively random way.
Much more can be said but this is setting as the first random number, 1234.
It could just as easily have been 4321 or any other integer.<br />
Let’s unpack this further.<br />
</p>
</blockquote>
<p>The grid size is set to 1000.
You can think of this as a map for a square region that is 1000 kilometers in both horizontal (East-West) and vertical (North-South) directions for visualization purposes.
We are then randomly placing customers on the map.</p>
<p>Next we set the number of customers to be 200 and the number of warehouses to be 40.
The size of this problem can have a tremendous impact on solving speed.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="more-integer-programming-models.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)      <span class="co"># Set random number seed</span></span>
<span id="cb180-2"><a href="more-integer-programming-models.html#cb180-2" aria-hidden="true" tabindex="-1"></a>grid_size <span class="ot">&lt;-</span> <span class="dv">1000</span>   <span class="co"># Horizontal and vertical axis ranges </span></span>
<span id="cb180-3"><a href="more-integer-programming-models.html#cb180-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">200</span> ; m <span class="ot">&lt;-</span> <span class="dv">40</span>  <span class="co"># Set number of customers and warehouses</span></span></code></pre></div>
<p>Next we create the customer data as a dataframe. The <code>runif</code> function generates a uniform random number between 0.0 and 1.0 such as perhaps 0.32721.This would be multiplied by our grid size multiplier of 1,000 resulting in 327.21.
This is then rounded to 327. Let’s now see how this is implemented for customers.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="more-integer-programming-models.html#cb181-1" aria-hidden="true" tabindex="-1"></a>customer_locations <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(      </span>
<span id="cb181-2"><a href="more-integer-programming-models.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span>n,                        <span class="co"># Create column with ID numbers from 1 to n</span></span>
<span id="cb181-3"><a href="more-integer-programming-models.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">round</span>(<span class="fu">runif</span>(n) <span class="sc">*</span> grid_size), <span class="co"># Create n x-coordinate values </span></span>
<span id="cb181-4"><a href="more-integer-programming-models.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">round</span>(<span class="fu">runif</span>(n) <span class="sc">*</span> grid_size)  <span class="co"># Create n y-coordinate values </span></span>
<span id="cb181-5"><a href="more-integer-programming-models.html#cb181-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Choosing to open a warehouse entails a fixed cost that varies for each warehouse, <em>j</em>, defined earlier as <span class="math inline">\(fixedcost_j\)</span> or <code>fixedcost[j]</code> in <code>R</code>.
The warehouse locations and fixed costs are again generated randomly as described by Dirk Schumacher.</p>
<blockquote>
<p>The <strong>warehouses</strong> are also randomly placed on the grid.
The fixed cost for the warehouses are randomly generated as well with mean cost of 10,000.
Notice that in this case, the fixedcost is generated using a normal random variable function, with a mean of 10 times the grid size or 10,000 and a standard deviation of 5000.</p>
</blockquote>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="more-integer-programming-models.html#cb182-1" aria-hidden="true" tabindex="-1"></a>warehouse_locations <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb182-2"><a href="more-integer-programming-models.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span>m,</span>
<span id="cb182-3"><a href="more-integer-programming-models.html#cb182-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">round</span>(<span class="fu">runif</span>(m) <span class="sc">*</span> grid_size),</span>
<span id="cb182-4"><a href="more-integer-programming-models.html#cb182-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">round</span>(<span class="fu">runif</span>(m) <span class="sc">*</span> grid_size)</span>
<span id="cb182-5"><a href="more-integer-programming-models.html#cb182-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb182-6"><a href="more-integer-programming-models.html#cb182-6" aria-hidden="true" tabindex="-1"></a>fixedcost <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(m, <span class="at">mean =</span> grid_size <span class="sc">*</span> <span class="dv">10</span>, </span>
<span id="cb182-7"><a href="more-integer-programming-models.html#cb182-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">sd =</span> grid_size <span class="sc">*</span> <span class="dv">5</span>))</span></code></pre></div>
<p>The fixed costs to set up a warehouse are the following:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="more-integer-programming-models.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(fixedcost, <span class="at">main=</span><span class="st">&quot;Fixed Costs of Warehouses&quot;</span>, </span>
<span id="cb183-2"><a href="more-integer-programming-models.html#cb183-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab=</span><span class="st">&quot;Cost&quot;</span>)</span></code></pre></div>
<p><img src="OMUR_files/figure-html/Fixedcost-histogram-1.png" width="672" /></p>
<p>he distribution of fixed costs is pretty broad. In fact, using a normal distribution means that is unbounded in both directions so it is possible for a warehouse to have a negative construction cost. While a negative construction cost might seem impossible, perhaps this would be an example of local tax incentives at work.<br />
</p>
<p>For transportation cost, we will assume that simple Euclidean distance is a good measure of cost.
Just a reminder, Euclidean distance between two points is <span class="math inline">\(\sqrt{(X_1-X_2)^2+(Y_1-Y_2)^2}\)</span>.
Of course in terms of cost, we could scale it or add a startup cost to each trip but for the sake of this example, we don’t need to worry about it. We could also use other distance metrics such rectilinear distance, driving distance, or any other metric we want.<br />
</p>
<p>Here we define a function to calculate the distance between customer <em>i</em> and warehouse <em>j</em>.<br />
</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="more-integer-programming-models.html#cb184-1" aria-hidden="true" tabindex="-1"></a>transportcost <span class="ot">&lt;-</span> <span class="cf">function</span>(i, j) {</span>
<span id="cb184-2"><a href="more-integer-programming-models.html#cb184-2" aria-hidden="true" tabindex="-1"></a>  customer <span class="ot">&lt;-</span> customer_locations[i, ]</span>
<span id="cb184-3"><a href="more-integer-programming-models.html#cb184-3" aria-hidden="true" tabindex="-1"></a>  warehouse <span class="ot">&lt;-</span> warehouse_locations[j, ]</span>
<span id="cb184-4"><a href="more-integer-programming-models.html#cb184-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">sqrt</span>((customer<span class="sc">$</span>x <span class="sc">-</span> warehouse<span class="sc">$</span>x)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> </span>
<span id="cb184-5"><a href="more-integer-programming-models.html#cb184-5" aria-hidden="true" tabindex="-1"></a>               (customer<span class="sc">$</span>y <span class="sc">-</span> warehouse<span class="sc">$</span>y)<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb184-6"><a href="more-integer-programming-models.html#cb184-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb184-7"><a href="more-integer-programming-models.html#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="fu">transportcost</span>(<span class="dv">1</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 648</code></pre>
<p>We could look at a sample of the customer location data.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="more-integer-programming-models.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (<span class="fu">head</span>(customer_locations), <span class="at">booktabs=</span>T, </span>
<span id="cb186-2"><a href="more-integer-programming-models.html#cb186-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Locations of First Six Customers&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb186-3"><a href="more-integer-programming-models.html#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Customer-Location">TABLE 7.1: </span>Locations of First Six Customers
</caption>
<thead>
<tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
x
</th>
<th style="text-align:right;">
y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
114
</td>
<td style="text-align:right;">
661
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
622
</td>
<td style="text-align:right;">
528
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
609
</td>
<td style="text-align:right;">
317
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
623
</td>
<td style="text-align:right;">
768
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
861
</td>
<td style="text-align:right;">
526
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
640
</td>
<td style="text-align:right;">
732
</td>
</tr>
</tbody>
</table>
<p>A table of the randomly generated locations is not terribly helpful for understanding the locations of customers or warehouses though.
Let’s build a map by plotting both customers and warehouses together.
Black dots are customers and red dots are possible warehouse locations.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="more-integer-programming-models.html#cb187-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_locations, <span class="fu">aes</span>(x, y)) <span class="sc">+</span> </span>
<span id="cb187-2"><a href="more-integer-programming-models.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb187-3"><a href="more-integer-programming-models.html#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> warehouse_locations, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb187-4"><a href="more-integer-programming-models.html#cb187-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">17</span>) <span class="sc">+</span></span>
<span id="cb187-5"><a href="more-integer-programming-models.html#cb187-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, grid_size)) <span class="sc">+</span></span>
<span id="cb187-6"><a href="more-integer-programming-models.html#cb187-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, grid_size)) <span class="sc">+</span></span>
<span id="cb187-7"><a href="more-integer-programming-models.html#cb187-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption=</span><span class="st">&quot;Black dots are customers. Light red triangles </span></span>
<span id="cb187-8"><a href="more-integer-programming-models.html#cb187-8" aria-hidden="true" tabindex="-1"></a><span class="st">       show potential warehouse locations.&quot;</span>) <span class="sc">+</span></span>
<span id="cb187-9"><a href="more-integer-programming-models.html#cb187-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb187-10"><a href="more-integer-programming-models.html#cb187-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb187-11"><a href="more-integer-programming-models.html#cb187-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb187-12"><a href="more-integer-programming-models.html#cb187-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span>
<span id="cb187-13"><a href="more-integer-programming-models.html#cb187-13" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-40"></span>
<img src="OMUR_files/figure-html/unnamed-chunk-40-1.png" alt="Map of Customer and Warehouse Locations" width="672" />
<p class="caption">
FIGURE 7.1: Map of Customer and Warehouse Locations
</p>
</div>
<p>Note that I have modified the variables names for <em>x</em> and <em>y</em> to be <code>Vx</code> and <code>Vy</code> in the code chunk to remove confusion over x and y representing location or variables. The prefix of <code>V</code> is meant to suggest that it is a variable. It also helps prevent name space conflicts with other <code>R</code> objects in my environment.<br />
</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="more-integer-programming-models.html#cb188-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">MIPModel</span>() <span class="sc">|&gt;</span></span>
<span id="cb188-2"><a href="more-integer-programming-models.html#cb188-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1 iff i gets assigned to warehouse j</span></span>
<span id="cb188-3"><a href="more-integer-programming-models.html#cb188-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_variable</span>(Vx [i, j], <span class="at">i=</span><span class="dv">1</span><span class="sc">:</span>n, <span class="at">j=</span><span class="dv">1</span><span class="sc">:</span>m, <span class="at">type=</span><span class="st">&quot;binary&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb188-4"><a href="more-integer-programming-models.html#cb188-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb188-5"><a href="more-integer-programming-models.html#cb188-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1 iff warehouse j is built</span></span>
<span id="cb188-6"><a href="more-integer-programming-models.html#cb188-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_variable</span>(Vy [j], <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>m, <span class="at">type =</span> <span class="st">&quot;binary&quot;</span>)       <span class="sc">|&gt;</span></span>
<span id="cb188-7"><a href="more-integer-programming-models.html#cb188-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb188-8"><a href="more-integer-programming-models.html#cb188-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># minimize cost</span></span>
<span id="cb188-9"><a href="more-integer-programming-models.html#cb188-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_objective</span>(<span class="fu">sum_expr</span>(<span class="fu">transportcost</span>(i, j) <span class="sc">*</span> Vx[i, j], </span>
<span id="cb188-10"><a href="more-integer-programming-models.html#cb188-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>m) <span class="sc">+</span> </span>
<span id="cb188-11"><a href="more-integer-programming-models.html#cb188-11" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">sum_expr</span>(fixedcost[j] <span class="sc">*</span> Vy[j], <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>m), </span>
<span id="cb188-12"><a href="more-integer-programming-models.html#cb188-12" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;min&quot;</span>)                                 <span class="sc">|&gt;</span></span>
<span id="cb188-13"><a href="more-integer-programming-models.html#cb188-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb188-14"><a href="more-integer-programming-models.html#cb188-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># every customer needs to be assigned to a warehouse</span></span>
<span id="cb188-15"><a href="more-integer-programming-models.html#cb188-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(<span class="fu">sum_expr</span>(Vx[i, j], <span class="at">j=</span><span class="dv">1</span><span class="sc">:</span>m)<span class="sc">==</span><span class="dv">1</span>, <span class="at">i=</span><span class="dv">1</span><span class="sc">:</span>n)  <span class="sc">|&gt;</span>  </span>
<span id="cb188-16"><a href="more-integer-programming-models.html#cb188-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb188-17"><a href="more-integer-programming-models.html#cb188-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if a customer is assigned to a warehouse, </span></span>
<span id="cb188-18"><a href="more-integer-programming-models.html#cb188-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    then this warehouse must be built</span></span>
<span id="cb188-19"><a href="more-integer-programming-models.html#cb188-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[i,j] <span class="sc">&lt;=</span> Vy[j], <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>m)</span>
<span id="cb188-20"><a href="more-integer-programming-models.html#cb188-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-21"><a href="more-integer-programming-models.html#cb188-21" aria-hidden="true" tabindex="-1"></a>model</span></code></pre></div>
<pre><code>## Mixed integer linear optimization problem
## Variables:
##   Continuous: 0 
##   Integer: 0 
##   Binary: 8040 
## Model sense: minimize 
## Constraints: 8200</code></pre>
<p>The number of <em>x</em> (or <code>Vx</code>) variables is <span class="math inline">\(m \cdot n =40 \cdot 200\)</span> or 8000 and the number of <em>y</em> (or <code>Vy</code>) variables is <span class="math inline">\(m\)</span> or 20, the total number of variables is 8040 which matches the model summary. A similar calculation can be done on the constraints. The number of variables and constraints make this a non-trivial sized MIP problem. Fortunately, solving still turns out to be pretty easy on a personal computer but be cautious of solving this on a cloud instance. In fact, preparing the LP to be solved using <code>ompr</code> can take a significant amount of time and this is an area of <code>ompr</code> being worked upon.<br />
</p>
</div>
<div id="solving-the-warehouse-location-problem" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Solving the Warehouse Location Problem</h3>
<p>Now that have prepared the model, we are now ready to work on solving the model. We will start with using <code>glpk</code> as we have done in previous examples.<br />
</p>
<p>The solver can generate a lot of additional information. We previously kept the default of <code>verbose = FALSE</code> but let’s see what we get with a more talkative or verbose option set (<code>verbose = TRUE</code>).<br />
</p>
<p>So far, you are unlikely to have noticed an optimization problem cause a visible delay.
If you run the following code chunk to solve this model, you may see the first distinct pause.
As I said, this is a non-trivial MIP problem! It may take only a few seconds or perhaps a few minutes depending upon your computer.
This also means that you must be careful in running MIP problems on cloud based services.
A particularly big MIP running on Amazon Web Services might create a sizable bill. This is the case whether you are using an Amazon Web Services instance, RStudio.cloud, or another cloud/shared service.<br />
</p>
<p>In summary, non-trivial MIP models should be run locally on a computer unless you are certain that your computational loads will not cause a problem for yourself or others.<br />
</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="more-integer-programming-models.html#cb190-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">solve_model</span>(model, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;glpk&quot;</span>))</span>
<span id="cb190-2"><a href="more-integer-programming-models.html#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="more-integer-programming-models.html#cb190-3" aria-hidden="true" tabindex="-1"></a>result</span></code></pre></div>
<pre><code>## Status: optimal
## Objective value: 60736</code></pre>
<p>We can see that the result was solved to optimality and the objective function value of We can summarize the information by simply extracting a the objective function value.
This can be done with inline R code. For example, we can say the following.</p>
<p>We solved the problem with an objective value of 60736.</p>
<p>With 8040 variables, it isn’t always terribly useful to just list out all of the variables.<br />
</p>
<p>At this point, we are really interested in the small minority of non-zero variables.
Only a small percentage of the <em>x</em> variables are not zero.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a><br />
</p>
<p>We can do some processing to extract the non-zero <em>x</em> (or <code>Vx</code>) variables from those with zero values.
In order to do so, Dirk uses the <code>dplyr</code> package.
This package provides a tremendous number of functions for data management.
To illustrate how this is done, let’s review line by line how this code chunk works.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="more-integer-programming-models.html#cb192-1" aria-hidden="true" tabindex="-1"></a>matching <span class="ot">&lt;-</span> result <span class="sc">|&gt;</span> </span>
<span id="cb192-2"><a href="more-integer-programming-models.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_solution</span>(Vx[i,j]) <span class="sc">|&gt;</span></span>
<span id="cb192-3"><a href="more-integer-programming-models.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(value <span class="sc">&gt;</span> .<span class="dv">9</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb192-4"><a href="more-integer-programming-models.html#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(i, j)</span></code></pre></div>
<p>The next command <code>matching &lt;- result |&gt;</code> does a few things.
It uses the piping operator <code>|&gt;</code> to pass the <code>result</code> object into being used by the following command and then everything that gets done later in this piped sequence will be assigned to <code>matching</code>.<br />
</p>
<p>The command <code>get_solution(Vx[i,j]) |&gt;</code> extracts solution values for the x variables (<code>Vx</code>) from the solved model object <code>result</code> piped in from the previous stage. This will give us a data object consisting of 2000 variables values, 95% of them being zero.<br />
</p>
<p>The command <code>filter(value &gt; .9) |&gt;</code> takes the previous command’s 2000 variable values and only keeps the ones for which the value is larger than 0.9.
Since these are binary variables, they should all be exactly 1.0 but just in case there is any numerical anomaly where a value is passed as a value close to one, such as 0.9999999, it is best to test with some tolerance.
This command then only passes to the next command the 100 non-zero values.<br />
</p>
<p>The last command in this code chunk <code>select(i, j)</code> says to only select (or retain) the columns named <code>i</code> and <code>j</code>.
Notice that this does not pass the actual value of zero or one - we know it is one!
Also, note that it does not include the piping operator <code>|&gt;</code> which means that it is the end of this piped sequence.<br />
</p>
<p>Let’s review what the two versions of the results look like.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="more-integer-programming-models.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (<span class="fu">head</span>( <span class="fu">get_solution</span>(result, Vx[i,j])), <span class="at">booktabs=</span>T,</span>
<span id="cb193-2"><a href="more-integer-programming-models.html#cb193-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Raw Results for Vx Variable.&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb193-3"><a href="more-integer-programming-models.html#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:raw-results-table">TABLE 7.2: </span>Raw Results for Vx Variable.
</caption>
<thead>
<tr>
<th style="text-align:left;">
variable
</th>
<th style="text-align:right;">
i
</th>
<th style="text-align:right;">
j
</th>
<th style="text-align:right;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Vx
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Vx
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Vx
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Vx
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Vx
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Vx
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>Notice that in the table of raw results, the first six entries (obtained using the <code>head</code> function) did not show any customers assigned to a warehouse.
This isn’t surprising given that only one in twenty values are non-zero. It is common in many binary programming cases for the vast majority of variables to have a value of zero.<br />
</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="more-integer-programming-models.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (<span class="fu">head</span>( matching), <span class="at">booktabs=</span>T, </span>
<span id="cb194-2"><a href="more-integer-programming-models.html#cb194-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span></span>
<span id="cb194-3"><a href="more-integer-programming-models.html#cb194-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Subset of Customers (i) Assigned to Warehouses (j)&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb194-4"><a href="more-integer-programming-models.html#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:processed-results-table">TABLE 7.3: </span>Subset of Customers (i) Assigned to Warehouses (j)
</caption>
<thead>
<tr>
<th style="text-align:right;">
i
</th>
<th style="text-align:right;">
j
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>The processed results table shows that the <code>matching</code> object simply lists six customers and to which warehouse it is assigned.
It has cut out the vast majority of rows (decision variables) with zero values.<br />
</p>
<p>This clean and simple listing from <code>matching</code> is interesting and will then be used for adding lines to the earlier <code>ggplot</code> model.<br />
</p>
<p>The last step is to add the assignments to the previous plot we generated.
Dirk used one single code chunk to do more processing of results, focused on warehouses, and then create the final plot.
I’ll break up the steps into separate code chunks just for the sake of illustrating how they work and showing the intermediate products. This is a useful chance to see how to manage results.<br />
</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="more-integer-programming-models.html#cb195-1" aria-hidden="true" tabindex="-1"></a>plot_assignment <span class="ot">&lt;-</span> matching <span class="sc">|&gt;</span> </span>
<span id="cb195-2"><a href="more-integer-programming-models.html#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(customer_locations, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;i&quot;</span> <span class="ot">=</span> <span class="st">&quot;id&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb195-3"><a href="more-integer-programming-models.html#cb195-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(warehouse_locations, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;j&quot;</span> <span class="ot">=</span> <span class="st">&quot;id&quot;</span>))</span>
<span id="cb195-4"><a href="more-integer-programming-models.html#cb195-4" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (<span class="fu">head</span>(plot_assignment), <span class="at">booktabs=</span>T, <span class="at">caption=</span></span>
<span id="cb195-5"><a href="more-integer-programming-models.html#cb195-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;XY coordinates to draw Customer-Warehouse Routes&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb195-6"><a href="more-integer-programming-models.html#cb195-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:plot-assignment">TABLE 7.4: </span>XY coordinates to draw Customer-Warehouse Routes
</caption>
<thead>
<tr>
<th style="text-align:right;">
i
</th>
<th style="text-align:right;">
j
</th>
<th style="text-align:right;">
x.x
</th>
<th style="text-align:right;">
y.x
</th>
<th style="text-align:right;">
x.y
</th>
<th style="text-align:right;">
y.y
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
623
</td>
<td style="text-align:right;">
768
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
861
</td>
<td style="text-align:right;">
526
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
640
</td>
<td style="text-align:right;">
732
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
514
</td>
<td style="text-align:right;">
986
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
694
</td>
<td style="text-align:right;">
566
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
923
</td>
<td style="text-align:right;">
758
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
</tr>
</tbody>
</table>
<p>Notice that this gives the beginning and ending coordinates of what will soon be lines to show the connections between customers and warehouses.<br />
</p>
<p>Now, let’s calculate how many customers each warehouse serves.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="more-integer-programming-models.html#cb196-1" aria-hidden="true" tabindex="-1"></a>customer_count <span class="ot">&lt;-</span> matching <span class="sc">|&gt;</span> </span>
<span id="cb196-2"><a href="more-integer-programming-models.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process matching and save result to customer_count</span></span>
<span id="cb196-3"><a href="more-integer-programming-models.html#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(j)              <span class="sc">|&gt;</span> <span class="co"># Group by warehouse</span></span>
<span id="cb196-4"><a href="more-integer-programming-models.html#cb196-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())       <span class="sc">|&gt;</span> <span class="co"># Summarize count</span></span>
<span id="cb196-5"><a href="more-integer-programming-models.html#cb196-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> j)              <span class="co"># Rename column from j to id</span></span>
<span id="cb196-6"><a href="more-integer-programming-models.html#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (customer_count, <span class="at">booktabs=</span>T, <span class="at">caption=</span></span>
<span id="cb196-7"><a href="more-integer-programming-models.html#cb196-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Count of Customers Assigned to Each Operating Warehouse&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb196-8"><a href="more-integer-programming-models.html#cb196-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:customer-count">TABLE 7.5: </span>Count of Customers Assigned to Each Operating Warehouse
</caption>
<thead>
<tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
67
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
72
</td>
</tr>
</tbody>
</table>
<p>We can see that warehouses selected to be built serve different numbers of customers.
Let’s gather more information to examine the fixed cost of the selected.
How does this compare with the histogram of fixed costs?<br />
</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="more-integer-programming-models.html#cb197-1" aria-hidden="true" tabindex="-1"></a>plot_warehouses <span class="ot">&lt;-</span> warehouse_locations              <span class="sc">|&gt;</span> </span>
<span id="cb197-2"><a href="more-integer-programming-models.html#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">costs =</span> fixedcost)                         <span class="sc">|&gt;</span> </span>
<span id="cb197-3"><a href="more-integer-programming-models.html#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(customer_count, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)             <span class="sc">|&gt;</span> </span>
<span id="cb197-4"><a href="more-integer-programming-models.html#cb197-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">%in%</span> <span class="fu">unique</span>(matching<span class="sc">$</span>j))</span>
<span id="cb197-5"><a href="more-integer-programming-models.html#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (plot_warehouses, <span class="at">booktabs=</span>T, <span class="at">caption =</span> </span>
<span id="cb197-6"><a href="more-integer-programming-models.html#cb197-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;Summary of Results for Warehouses Used&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb197-7"><a href="more-integer-programming-models.html#cb197-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:prepare-to-plot-warehouses">TABLE 7.6: </span>Summary of Results for Warehouses Used
</caption>
<thead>
<tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
x
</th>
<th style="text-align:right;">
y
</th>
<th style="text-align:right;">
costs
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
757
</td>
<td style="text-align:right;">
745
</td>
<td style="text-align:right;">
4511
</td>
<td style="text-align:right;">
67
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
517
</td>
<td style="text-align:right;">
1184
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
426
</td>
<td style="text-align:right;">
393
</td>
<td style="text-align:right;">
4061
</td>
<td style="text-align:right;">
72
</td>
</tr>
</tbody>
</table>
<p>The <code>plot_warehouses</code> data frame<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> is built using <code>dplyr</code> functions to create a summary of the important information about the warehouses used: where they are located, costs, and number of customers served.<br />
</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="more-integer-programming-models.html#cb198-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> </span>
<span id="cb198-2"><a href="more-integer-programming-models.html#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data=</span>plot_assignment, </span>
<span id="cb198-3"><a href="more-integer-programming-models.html#cb198-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x=</span>x.y, <span class="at">y=</span>y.y, <span class="at">xend=</span>x.x, <span class="at">yend=</span>y.x)) <span class="sc">+</span> </span>
<span id="cb198-4"><a href="more-integer-programming-models.html#cb198-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data  =</span> plot_warehouses, </span>
<span id="cb198-5"><a href="more-integer-programming-models.html#cb198-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">3</span>, <span class="at">shape=</span><span class="dv">17</span>) <span class="sc">+</span></span>
<span id="cb198-6"><a href="more-integer-programming-models.html#cb198-6" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(<span class="at">data  =</span> plot_warehouses, </span>
<span id="cb198-7"><a href="more-integer-programming-models.html#cb198-7" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(</span>
<span id="cb198-8"><a href="more-integer-programming-models.html#cb198-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">&quot;fixed costs:&quot;</span>,costs, <span class="st">&quot;; </span></span>
<span id="cb198-9"><a href="more-integer-programming-models.html#cb198-9" aria-hidden="true" tabindex="-1"></a><span class="st">                              customers: &quot;</span>, n)), </span>
<span id="cb198-10"><a href="more-integer-programming-models.html#cb198-10" aria-hidden="true" tabindex="-1"></a>                            <span class="at">size =</span> <span class="dv">2</span>, <span class="at">nudge_y =</span> <span class="dv">20</span>) <span class="sc">+</span> </span>
<span id="cb198-11"><a href="more-integer-programming-models.html#cb198-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(</span>
<span id="cb198-12"><a href="more-integer-programming-models.html#cb198-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Optimal Warehouse Locations and Customer Assignment&quot;</span>),</span>
<span id="cb198-13"><a href="more-integer-programming-models.html#cb198-13" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Big red triangles show warehouses that will be built.</span></span>
<span id="cb198-14"><a href="more-integer-programming-models.html#cb198-14" aria-hidden="true" tabindex="-1"></a><span class="st">Light red are unused warehouse locations. </span></span>
<span id="cb198-15"><a href="more-integer-programming-models.html#cb198-15" aria-hidden="true" tabindex="-1"></a><span class="st">Lines connect customers to their assigned warehouses.&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-41"></span>
<img src="OMUR_files/figure-html/unnamed-chunk-41-1.png" alt="Optional Warehouse Locations Customer Assignments" width="672" />
<p class="caption">
FIGURE 7.2: Optional Warehouse Locations Customer Assignments
</p>
</div>
<p>The total fixed costs for setting up the 3 warehouses is:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="more-integer-programming-models.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(fixedcost[<span class="fu">unique</span>(matching<span class="sc">$</span>j)])</span></code></pre></div>
<pre><code>## [1] 9756</code></pre>
<p>The above function cleverly uses the warehouse ID column from <code>matching</code> (<code>matching$j</code>) to make list unique and get rid of duplicates.
Recall that warehouses will be listed 100 times since every customer has a warehouse listed in matching.
Next, it uses these ID numbers to extract fixed-cost values and adds them up.
Note that when you see a command such as this in R, it can often work to run them one at time in the console to see how they work.
To demonstrate this, see how each statement builds upon the previous.</p>
<p><code>matching$j</code></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-42"></span>
<img src="images/ch8-MatchingJ.PNG" alt="LP Region and 10 IP Feasible Solutions" width="100%" />
<p class="caption">
FIGURE 7.3: LP Region and 10 IP Feasible Solutions
</p>
</div>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="more-integer-programming-models.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(matching<span class="sc">$</span>j)                  </span></code></pre></div>
<pre><code>## [1]  3 24 28</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="more-integer-programming-models.html#cb203-1" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Eliminate duplicate warehouse IDs</span></span>
<span id="cb203-2"><a href="more-integer-programming-models.html#cb203-2" aria-hidden="true" tabindex="-1"></a>fixedcost[<span class="fu">unique</span>(matching<span class="sc">$</span>j)]       </span></code></pre></div>
<pre><code>## [1] 4511 1184 4061</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="more-integer-programming-models.html#cb205-1" aria-hidden="true" tabindex="-1"></a>   <span class="co">#Find fixed costs of warehouses used</span></span>
<span id="cb205-2"><a href="more-integer-programming-models.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(fixedcost[<span class="fu">unique</span>(matching<span class="sc">$</span>j)])  </span></code></pre></div>
<pre><code>## [1] 9756</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="more-integer-programming-models.html#cb207-1" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Add fixed costs of all warehouses used</span></span></code></pre></div>
</div>
<div id="warehouse-discussion" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Warehouse Discussion</h3>
<p>This warehouse customer assignment problem was discussed in detail for multiple reasons.</p>
<ul>
<li>It demonstrates a large, classic, and common industrial application of optimization.</li>
<li>The application uses simulated data to feed into an optimization model.</li>
<li>This model uses both single and double subscripted variables as well techniques for coordinating them.</li>
<li>Introduces the use of <code>ggplot</code> to visualize the data and results.</li>
<li>Demonstrates data munging which is a major time sink for analysts which can also occur in large optimizaton models so this application shows how to use <code>dplyr</code> to process data and results.<br />
</li>
</ul>
<p>This analysis could be extended in a variety of ways to explore other questions.</p>
<ul>
<li>What is the statistical distribution of the optimal number of warehouses used when simulated a 1000 times?</li>
<li>How often would it be optimal to five or more warehouses?</li>
<li>Does decreasing variation in fixed costs affect the number of warehouses used?</li>
<li>Does decreasing the mean cost of warehouses affect the number of warehouses used?<br />
</li>
</ul>
<p>The model can also be extended in a variety of ways.</p>
<ul>
<li>To allow for additional application characteristics such as warehouse capacity and customer demand.</li>
<li>Using actual cities in a region for locations rather than randomly generated data and a map.<br />
</li>
</ul>
<p>The same concepts can also be applied to other applications.</p>
</div>
</div>
<div id="solving-mips-with-different-solvers" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Solving MIPs with Different Solvers</h2>
<p>One of the big benefits of <code>ompr</code> is that it separates the process of formulating the optimization model from that of solving it and thereby let’s us easily switch to other solvers.
Up until this point, we have used the <code>glpk</code> solver.
Now that we have a nontrivial optimization model, the Warehouse Location Model, let’s use it.</p>
<p>The emphasis in this section is not model building but comparing the use of different solvers.
Since we have the model already defined as an object, simply named <code>model</code>, we can easily pass it to the different solvers for optimizing.
There is a large collection of other solvers that can be used with R.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<p>We’ll demonstrate the performance for illustration purposes.
Again, do not run the following code chunks in this section on a cloud-based service such as Rstudio.cloud, unless you are certain that imposing a non-trivial computational load is acceptable.</p>
<div id="performance-of-glpk" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Performance of <code>glpk</code></h3>
<p>We have been using <code>glpk</code> for all of our earlier examples.
For the sake of comparison, let’s start off with it too. We’ll set the <code>verbose=TRUE</code> option to be passed through ROI to the <code>glpk</code> solver. The exact options available for each solver and their available options varies.
We will use the <code>tictoc</code> package to help us collect data on timing.
Note that timing can vary even if the same problem is solved on the same computer twice in rapid succession.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="more-integer-programming-models.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tictoc)   <span class="co"># Package used for timing R functions</span></span>
<span id="cb208-2"><a href="more-integer-programming-models.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">&quot;glpk&quot;</span>)        <span class="co"># Start the timer...</span></span>
<span id="cb208-3"><a href="more-integer-programming-models.html#cb208-3" aria-hidden="true" tabindex="-1"></a>result_glpk <span class="ot">&lt;-</span> <span class="fu">solve_model</span>(</span>
<span id="cb208-4"><a href="more-integer-programming-models.html#cb208-4" aria-hidden="true" tabindex="-1"></a>  model, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;glpk&quot;</span>, <span class="at">verbose=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.47
## 8200 rows, 8040 columns, 24000 non-zeros
##       0: obj =  0.000000000e+000  infeas = 2.000e+002 (200)
## *   201: obj =  1.087950000e+005  infeas = 0.000e+000 (200)
## *   500: obj =  1.087950000e+005  infeas = 0.000e+000 (102)
## *  1000: obj =  1.087950000e+005  infeas = 0.000e+000 (0)
## *  1500: obj =  1.087950000e+005  infeas = 0.000e+000 (0)
## *  2000: obj =  1.087950000e+005  infeas = 0.000e+000 (0)
## *  2500: obj =  6.119050000e+004  infeas = 0.000e+000 (0)
## *  2714: obj =  6.073600000e+004  infeas = 0.000e+000 (0)
## OPTIMAL SOLUTION FOUND
## GLPK Integer Optimizer, v4.47
## 8200 rows, 8040 columns, 24000 non-zeros
## 8040 integer variables, all of which are binary
## Integer optimization begins...
## +  2714: mip =     not found yet &gt;=              -inf        (1; 0)
## +  2714: &gt;&gt;&gt;&gt;&gt;  6.073600000e+004 &gt;=  6.073600000e+004   0.0% (1; 0)
## +  2714: mip =  6.073600000e+004 &gt;=     tree is empty   0.0% (0; 1)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="more-integer-programming-models.html#cb210-1" aria-hidden="true" tabindex="-1"></a>glpktime <span class="ot">&lt;-</span> <span class="fu">toc</span>()  <span class="co"># End the timer and save results</span></span></code></pre></div>
<pre><code>## glpk: 36.65 sec elapsed</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="more-integer-programming-models.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">solver_status</span>(result_glpk))</span></code></pre></div>
<pre><code>## [1] &quot;optimal&quot;</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="more-integer-programming-models.html#cb214-1" aria-hidden="true" tabindex="-1"></a>glpktime1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;glpk&quot;</span>, glpktime<span class="sc">$</span>toc <span class="sc">-</span> glpktime<span class="sc">$</span>tic, </span>
<span id="cb214-2"><a href="more-integer-programming-models.html#cb214-2" aria-hidden="true" tabindex="-1"></a>               result_glpk<span class="sc">$</span>status, </span>
<span id="cb214-3"><a href="more-integer-programming-models.html#cb214-3" aria-hidden="true" tabindex="-1"></a>               result_glpk<span class="sc">$</span>objective_value)</span></code></pre></div>
<p>The more verbose output provides additional details on the solving. For example, it indicates that the Simplex method was used by indicating a Simplex optimizer was used before then passing the LP relaxation solution to the integer optimization.  In general, the <code>glpk</code> solver worked. We’ll take the results and combine them with other shortly.</p>
</div>
<div id="performance-of-symphony" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Performance of <code>symphony</code></h3>
<p>Let’s move on to testing the <code>symphony</code> solver. Symphony is a solver with a long history of development.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="more-integer-programming-models.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">&quot;symphony&quot;</span>)</span>
<span id="cb215-2"><a href="more-integer-programming-models.html#cb215-2" aria-hidden="true" tabindex="-1"></a>result_symphony <span class="ot">&lt;-</span>  <span class="fu">solve_model</span>(</span>
<span id="cb215-3"><a href="more-integer-programming-models.html#cb215-3" aria-hidden="true" tabindex="-1"></a>  model, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;symphony&quot;</span>, <span class="at">verbosity =</span> <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb215-4"><a href="more-integer-programming-models.html#cb215-4" aria-hidden="true" tabindex="-1"></a>symphonytime <span class="ot">&lt;-</span> <span class="fu">toc</span>()</span></code></pre></div>
<pre><code>## symphony: 33.46 sec elapsed</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="more-integer-programming-models.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">solver_status</span>(result_symphony))</span></code></pre></div>
<pre><code>## [1] &quot;optimal&quot;</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="more-integer-programming-models.html#cb219-1" aria-hidden="true" tabindex="-1"></a>symphonytime1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;symphony&quot;</span>, </span>
<span id="cb219-2"><a href="more-integer-programming-models.html#cb219-2" aria-hidden="true" tabindex="-1"></a>                   symphonytime<span class="sc">$</span>toc <span class="sc">-</span> symphonytime<span class="sc">$</span>tic,</span>
<span id="cb219-3"><a href="more-integer-programming-models.html#cb219-3" aria-hidden="true" tabindex="-1"></a>                   result_symphony<span class="sc">$</span>status,</span>
<span id="cb219-4"><a href="more-integer-programming-models.html#cb219-4" aria-hidden="true" tabindex="-1"></a>                   result_symphony<span class="sc">$</span>objective_value)</span></code></pre></div>
<p>Again, <code>symphony</code> successfully solved the optimization problem.<br />
</p>
<p>Several items should be noted from the above code and output.</p>
<p>One item is that parameters can be passed directly to solvers.
This is why <code>verbose = TRUE</code> was used for <code>glpk</code> but <code>symphony</code> uses <code>verbosity = -1</code>.
Differing levels of verbosity gives much more granularity than a simple TRUE/FALSE.
Setting <code>verbosity = 0</code> will give rich detail that an analyst trying to improve solution speed may find useful or for debugging why a model did not work but explaining the report is beyond the scope of this text.</p>
<p>Other options can be passed to the symphony solver such as <code>time_limit</code>, <code>gap_limit</code>, and <code>first_feasible</code> which all allow for optimization runs to be finished before it has solved the model to known optimality. These early termination options can be very helpful when working with large integer programming problems.</p>
<p>The <code>time_limit</code> option has a default value of -1 meaning no time limit.
It should be an integer to indicate the number of seconds to run before stopping.</p>
<p>The <code>node_limit</code> option has a default value of -1 meaning no limit on the number of nodes (in an MIP problem, the number of linear programs). It should be an integer to indicate the number of nodes examined before stopping.</p>
<p>The last option, <code>first_feasible</code>, has a default value of <code>FALSE</code>.
If it is set to <code>TRUE</code>, then symphony will stop when it has found a first solution that satisfies all the constraints (including integrality) rather than continuing on to prove optimality.</p>
<p>Let’s examine the impact of just looking at the first feasible solution found by passing <code>first_feasible=TRUE</code> to see what happens.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="more-integer-programming-models.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">&quot;symphony&quot;</span>)</span>
<span id="cb220-2"><a href="more-integer-programming-models.html#cb220-2" aria-hidden="true" tabindex="-1"></a>result_symphony_ff <span class="ot">&lt;-</span> <span class="fu">solve_model</span>(</span>
<span id="cb220-3"><a href="more-integer-programming-models.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  model, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;symphony&quot;</span>,</span>
<span id="cb220-4"><a href="more-integer-programming-models.html#cb220-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">verbosity =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">first_feasible=</span><span class="cn">TRUE</span>))</span>
<span id="cb220-5"><a href="more-integer-programming-models.html#cb220-5" aria-hidden="true" tabindex="-1"></a>symphonytimeff <span class="ot">&lt;-</span> <span class="fu">toc</span>()</span></code></pre></div>
<pre><code>## symphony: 37.56 sec elapsed</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="more-integer-programming-models.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">solver_status</span>(result_symphony_ff))</span></code></pre></div>
<pre><code>## [1] &quot;infeasible&quot;</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="more-integer-programming-models.html#cb224-1" aria-hidden="true" tabindex="-1"></a>symphonytimeff <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;symphony first feas.&quot;</span>, </span>
<span id="cb224-2"><a href="more-integer-programming-models.html#cb224-2" aria-hidden="true" tabindex="-1"></a>                    symphonytimeff<span class="sc">$</span>toc <span class="sc">-</span> symphonytimeff<span class="sc">$</span>tic,</span>
<span id="cb224-3"><a href="more-integer-programming-models.html#cb224-3" aria-hidden="true" tabindex="-1"></a>                   result_symphony_ff<span class="sc">$</span>status,</span>
<span id="cb224-4"><a href="more-integer-programming-models.html#cb224-4" aria-hidden="true" tabindex="-1"></a>                   result_symphony_ff<span class="sc">$</span>objective_value)</span></code></pre></div>
<p>Several interesting and important things should be noted here.
First, <code>ompr</code> status indicates that the problem is infeasible. Just as we saw in Chapter 2’s unbounded case, <code>ompr</code> interprets the status code from the solver by way of <code>ROI</code> as not being solved to optimality and concludes that the problem is not feasible. </p>
<p>This is a known issue in <code>ompr</code> and <code>ompr.ROI</code>as of version 0.8.1.
It highlights that “infeasible” status from the <code>ompr</code> should be thought of as meaning that an optimal solution was not found for <em>some</em> reason such as being told to terminate after the first feasible solution was found, time limit reached, node limit reached, the MIP was infeasible, the MIP was unbounded, or some other issue.</p>
<p>A second thing to note that in my randomly generated instance, the very first feasible solution it found, happens to have the same objective function value as the optimal solution found to optimality earlier by <code>glpk</code> and <code>symphony</code>.</p>
<p>This is similar to the very simple, two variable integer programming problem that we examined using a branch and bound tree in the previous chapter but stopped before searching down the rest of the tree. Symphony just doesn’t have confirmation yet that this first feasible solution is truly optimal yet.</p>
<p>Thirdly, on my computer it sometimes took less time to solve to optimality than for when it stopped <em>early</em> with just the initial feasible solution.</p>
<p>This demonstrates the variability of solving time and that while the warehouse optimization problem has quite a few variables, in its current structure, it is not a particularly difficult integer programming problem.</p>
</div>
<div id="performance-of-lpsolve" class="section level3" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Performance of <code>lpsolve</code></h3>
<p>The <code>lpsolve</code> package has a long history too and is widely used. Let’s test it and see how it performs.<br />
</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="more-integer-programming-models.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">&quot;lpsolve&quot;</span>)</span>
<span id="cb225-2"><a href="more-integer-programming-models.html#cb225-2" aria-hidden="true" tabindex="-1"></a>result_lpsolve <span class="ot">&lt;-</span>  <span class="fu">solve_model</span>(</span>
<span id="cb225-3"><a href="more-integer-programming-models.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  model, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;lpsolve&quot;</span>, <span class="at">verbose=</span><span class="cn">FALSE</span>))</span>
<span id="cb225-4"><a href="more-integer-programming-models.html#cb225-4" aria-hidden="true" tabindex="-1"></a>lpsolvetime <span class="ot">&lt;-</span> <span class="fu">toc</span>()</span></code></pre></div>
<pre><code>## lpsolve: 39.85 sec elapsed</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="more-integer-programming-models.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">solver_status</span>(result_lpsolve))</span></code></pre></div>
<pre><code>## [1] &quot;optimal&quot;</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="more-integer-programming-models.html#cb229-1" aria-hidden="true" tabindex="-1"></a>lpsolvetime1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;lpsolve&quot;</span>, </span>
<span id="cb229-2"><a href="more-integer-programming-models.html#cb229-2" aria-hidden="true" tabindex="-1"></a>                  lpsolvetime<span class="sc">$</span>toc <span class="sc">-</span> lpsolvetime<span class="sc">$</span>tic,</span>
<span id="cb229-3"><a href="more-integer-programming-models.html#cb229-3" aria-hidden="true" tabindex="-1"></a>                   result_lpsolve<span class="sc">$</span>status,</span>
<span id="cb229-4"><a href="more-integer-programming-models.html#cb229-4" aria-hidden="true" tabindex="-1"></a>                   result_lpsolve<span class="sc">$</span>objective_value)</span></code></pre></div>
<p>Again, we see that <code>lpsolve</code> was also successful.</p>
</div>
<div id="performance-of-gurobi" class="section level3" number="7.3.4">
<h3><span class="header-section-number">7.3.4</span> Performance of <code>gurobi</code></h3>
<p>Gurobi is a comprehensive commercial optimization solver and is generally considered to be the fastest mixed integer programming solver.
It is widely used for large scale commercial applications such as Amazon, Starbucks, and others.
It can be run through a variety of platforms including C, Python, AMPL, GAMS, and other platforms.
It is also available through R but requires more work than the open solvers that have previously used.
To use Gurobi in R, do the following:</p>
<ol style="list-style-type: decimal">
<li>Get a license to gurobi (free licenses are available for academic use)</li>
<li>Download and install the gurobi software</li>
<li>Follow directions to have software access license key</li>
<li>Install gurobi’s R package. Note that the package file is not in CRAN and will need to be installed directly from the gurobi installed files on your local computer. (For example in my windows install, it was in <code>C:\\gurobi900\win64\R</code> directory.)</li>
<li>Install the <code>roi.plugin.gurobi</code> package. Note that this may need to be installed from a github account as it is not officially supported by Gurobi.</li>
</ol>
<p>A code chunk is provided without evaluation (by setting a code chunk option of <code>eval=FALSE</code>) for several reasons:</p>
<ul>
<li>Avoid issues of reproducibility for people that don’t have access to gurobi</li>
<li>Avoid potential of breaking working code due license expiration</li>
<li>Maintain the philosophy of open-source tools</li>
<li>Performance testing of gurobi under these circumstances might not do justice to the performance benefits of gurobi on much more complex optimization problems.</li>
</ul>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="more-integer-programming-models.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">&quot;gurobi&quot;</span>)</span>
<span id="cb230-2"><a href="more-integer-programming-models.html#cb230-2" aria-hidden="true" tabindex="-1"></a>result_gurobi <span class="ot">&lt;-</span>  <span class="fu">solve_model</span>(</span>
<span id="cb230-3"><a href="more-integer-programming-models.html#cb230-3" aria-hidden="true" tabindex="-1"></a>  model, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;gurobi&quot;</span>))</span>
<span id="cb230-4"><a href="more-integer-programming-models.html#cb230-4" aria-hidden="true" tabindex="-1"></a>gurobitime <span class="ot">&lt;-</span> <span class="fu">toc</span>()</span>
<span id="cb230-5"><a href="more-integer-programming-models.html#cb230-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">solver_status</span>(result_gurobi))</span>
<span id="cb230-6"><a href="more-integer-programming-models.html#cb230-6" aria-hidden="true" tabindex="-1"></a>gurobitime1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gurobi&quot;</span>, </span>
<span id="cb230-7"><a href="more-integer-programming-models.html#cb230-7" aria-hidden="true" tabindex="-1"></a>                  gurobitime<span class="sc">$</span>toc <span class="sc">-</span> gurobitime<span class="sc">$</span>tic,</span>
<span id="cb230-8"><a href="more-integer-programming-models.html#cb230-8" aria-hidden="true" tabindex="-1"></a>                   result_gurobi<span class="sc">$</span>status,</span>
<span id="cb230-9"><a href="more-integer-programming-models.html#cb230-9" aria-hidden="true" tabindex="-1"></a>                   result_lpsolve<span class="sc">$</span>objective_value)</span></code></pre></div>
<p>The <code>ROI.plugin</code> for each respective solver general accepts a subset of all the parameters or options that a solver can use.
This may mean some trial and error is involved.
The <a href="https://www.gurobi.com/documentation/9.0/refman/parameters.html#sec:Parameters">Gurobi documentation</a> provides a comprehensive list of parameters.</p>
<p>I’ve tested the following commonly used parameters with Gurobi and can confirm that they appear to work.</p>
<ul>
<li><code>TimeLimit</code> terminates solving based on seconds, (usage: <code>TimeLimit=40.0</code>)</li>
<li><code>SolutionLimit</code> limits the number of MIP feasible solutions, (usage: <code>SolutionLimit=20</code>)</li>
<li><code>NodeLimit</code> limits the number of MIP nodes, only used in MIP, (usage: <code>NodeLimit=200</code>)</li>
<li><code>BestObjStop</code> stops when a solution is as good as value, (usage: <code>BestObjStop=50000.0</code>)</li>
<li><code>BestBdStop</code> stops when best bound is as good as value (usage: <code>BestBdStop=50000.0</code>)</li>
<li><code>MIPGap</code> stops based on relative gap between best bound and current solution. Note that the default is <span class="math inline">\(10^-4\)</span> rather than 0. A value of 0.1 effectively means that a solution is accepted and solving terminated if it is known that no solution is possible that is 10% better. (usage: <code>MIPGap=0.1</code>)</li>
<li><code>MIPGapAb</code> stops based on absolute gap between best bound and current solution. For example if the objective function is in dollars, a value of 1000.0 means that a solution is accepted and solving terminated if it is known that no solution is possible is more <span class="math inline">\(\$1000\)</span> better. (usage: <code>MIPGap=1000.0</code>)</li>
</ul>
<p>The gurobi solver has far more capabilities than are presented here. It provides it’s own algebraic modeling language and as an integrated solution is able to avoid the issue of misinterpreting solving codes. For people with very large scale optimization problems that they are solving on a frequent basis, it may be worth investigating these other options. The <code>ompr</code> tool and algebraic modeling language used within R will make the transition straightforward.</p>
</div>
<div id="comparing-results-across-solvers" class="section level3" number="7.3.5">
<h3><span class="header-section-number">7.3.5</span> Comparing Results across Solvers</h3>
<p>Now let’s compare how three major open source optimization solvers performed.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="more-integer-programming-models.html#cb231-1" aria-hidden="true" tabindex="-1"></a>timeresults <span class="ot">&lt;-</span> <span class="fu">rbind</span>(glpktime1, symphonytime1, </span>
<span id="cb231-2"><a href="more-integer-programming-models.html#cb231-2" aria-hidden="true" tabindex="-1"></a>                     symphonytimeff, lpsolvetime1)</span>
<span id="cb231-3"><a href="more-integer-programming-models.html#cb231-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span> (timeresults) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Solver&quot;</span>, <span class="st">&quot;Time (Sec)&quot;</span>, </span>
<span id="cb231-4"><a href="more-integer-programming-models.html#cb231-4" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;Status&quot;</span>, </span>
<span id="cb231-5"><a href="more-integer-programming-models.html#cb231-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;Obj. Func. Value&quot;</span>)</span>
<span id="cb231-6"><a href="more-integer-programming-models.html#cb231-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span> (timeresults) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb231-7"><a href="more-integer-programming-models.html#cb231-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-8"><a href="more-integer-programming-models.html#cb231-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (timeresults, <span class="at">booktabs =</span> T, <span class="at">digits=</span><span class="dv">2</span>,</span>
<span id="cb231-9"><a href="more-integer-programming-models.html#cb231-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption=</span><span class="st">&quot;Comparison of Results from Warehouse </span></span>
<span id="cb231-10"><a href="more-integer-programming-models.html#cb231-10" aria-hidden="true" tabindex="-1"></a><span class="st">       Customer Assignment Across Solvers&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb231-11"><a href="more-integer-programming-models.html#cb231-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="st">&quot;hold_position&quot;</span>)</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:comparetimes">TABLE 7.7: </span>Comparison of Results from Warehouse
Customer Assignment Across Solvers
</caption>
<thead>
<tr>
<th style="text-align:left;">
Solver
</th>
<th style="text-align:left;">
Time (Sec)
</th>
<th style="text-align:left;">
Status
</th>
<th style="text-align:left;">
Obj. Func. Value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
glpk
</td>
<td style="text-align:left;">
36.65
</td>
<td style="text-align:left;">
optimal
</td>
<td style="text-align:left;">
60736
</td>
</tr>
<tr>
<td style="text-align:left;">
symphony
</td>
<td style="text-align:left;">
33.46
</td>
<td style="text-align:left;">
optimal
</td>
<td style="text-align:left;">
60736
</td>
</tr>
<tr>
<td style="text-align:left;">
symphony first feas.
</td>
<td style="text-align:left;">
37.56
</td>
<td style="text-align:left;">
infeasible
</td>
<td style="text-align:left;">
60736
</td>
</tr>
<tr>
<td style="text-align:left;">
lpsolve
</td>
<td style="text-align:left;">
39.85
</td>
<td style="text-align:left;">
optimal
</td>
<td style="text-align:left;">
60736
</td>
</tr>
</tbody>
</table>
<p>The most important thing to note is that each solver states that it found the same value for an objective function.
While they may vary in how it is achieved if there are multiple optima (in other words, different values for decision variables <em>x</em> and <em>y</em>), this means that they all found a correct solution.
Of course it would be a big problem if they claimed to have optimal solutions with different objective function values.</p>
<p>Note that time will vary significantly from computer to computer and may also depend upon the other tasks and the amount of memory available.
Performance will change for different solver settings and for different problems.
Also, performance time will change for different random instances—simply changing the random number seed will create different run-time results.
This problem is probably too small to show off the advantages of gurobi and running gurobi through third party tool interfaces such as <code>ompr</code> and <code>ROI</code> will also be slower than a more native format.<br />
</p>
<p>The ROI package lists 19 different solvers with ROI plugins.
Three commercial solvers, C-Plex, GUROBI, and MOSEK are worth highlighting.
These programs may be substantially faster on large MIP problems and may make versions available for academic use.
Others are for quadratic optimization or special classes of optimization problems.<br />
</p>
<p>After running these chunks dozens of times and finding the results to be quite stable across the various solvers tested, using a code chunk option <code>cache=TRUE</code> may be beneficial. 
Caching means that it will save and reuse the results unless things are changed.
If it determines that things have changed, it will rerun that chunk.
This can save a lot of time in knitting the chapter or rebuilding the book.
This is a good application area for demonstrating the benefits of using the chunk option for caching.
The current application requires about a minute to do each full size customer warehouse optimization run.
Caching just the four runs can save a lot of knitting time.
RStudio and knitr do a sophisticated check for changes which can invalidate the previously cached results and will then rerun the code chunk and save the results for future cached knits as appropriate.
More demanding needs can use the granularity of numerical options for caching as compared to simply TRUE/FALSE and additional options.
These might be required in detailed performance testing or numerical performance comparisons.<br />
</p>
<p>While caching can be very helpful with large runs, I have also run into difficulty where data or a code chunk has changed in a way that I know should affect results and yet the results didn’t change. In fact, when running all the code chunks, the correct results would be shown. After too long a time spent debugging, I realized that it was a problem with the knitted file using old cached results rather than actually rerunning the current results. Technically, I had expected the previous cached results to be considered invalidated. In general, I would recommend not using knitr’s caching of results unless computation time or resources become a problem and the user is willing to learn a little about the issue of caching.</p>
<p>Significant computer time can be used for large models but a variety of questions can be examined such as the following.</p>
<ul>
<li>How is problem size related to solving time?</li>
<li>Are there systematic differences in speed or solving success for different solvers?
(ex. does Gurobi run faster?)</li>
<li>How do various modeling parameters affect solution speed?</li>
</ul>
</div>
<div id="popularity-of-lp-solvers" class="section level3" number="7.3.6">
<h3><span class="header-section-number">7.3.6</span> Popularity of LP Solvers</h3>
<p>Let’s take another look at comparing solvers by examining their popularity.
More precisely, let’s examine the download logs of CRAN for a variety of linear programming solvers.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-43"></span>
<img src="OMUR_files/figure-html/unnamed-chunk-43-1.png" alt="Monthly Downloads of Optimzation Packages" width="960" />
<p class="caption">
FIGURE 7.4: Monthly Downloads of Optimzation Packages
</p>
</div>
<p>Many of these packages are being used directly in other packages.
While we can’t see which packages are being specifically used most often for <code>ompr</code>, we can see which ROI plugins are downloaded most often which is probably a good proxy.<br />
</p>
<p>We will focus our attention on the ROI packages that emphasize linear programming.
This means dropping packages such as <code>ROI.plugin.nloptr</code> and <code>ROI.plugin.quadprog</code>.</p>
<p>Also, commercial software that is not available on CRAN such as gurobi and XPress, are not included.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-44"></span>
<img src="OMUR_files/figure-html/unnamed-chunk-44-1.png" alt="Monthly Downloads of Major ROI LP Plugins" width="960" />
<p class="caption">
FIGURE 7.5: Monthly Downloads of Major ROI LP Plugins
</p>
</div>
<p>It is interesting to see that the <code>symphony</code> and <code>glpk</code> ROI plugins were relatively equal in downloads until about 2015 when <code>glpk</code> started to open a lead in usage.
This of course does not mean that <code>glpk</code> is better than the others but is interesting to note.
The spikes in downloads could be driven by other packages that use this particular solver, visibility from vignettes, courses, other publications, or package updates.<br />
</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="more-integer-programming-models.html#cb232-1" aria-hidden="true" tabindex="-1"></a>pkg_dl_data <span class="ot">&lt;-</span> <span class="fu">cran_stats</span>(<span class="at">packages =</span> <span class="fu">c</span>(<span class="st">&quot;ompr&quot;</span>))</span>
<span id="cb232-2"><a href="more-integer-programming-models.html#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pkg_dl_data, <span class="fu">aes</span>(end, downloads, <span class="at">group=</span>package, </span>
<span id="cb232-3"><a href="more-integer-programming-models.html#cb232-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">color=</span>package)) <span class="sc">+</span></span>
<span id="cb232-4"><a href="more-integer-programming-models.html#cb232-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()  <span class="sc">+</span> </span>
<span id="cb232-5"><a href="more-integer-programming-models.html#cb232-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">&quot;ompr:  Optimization Modeling Package for R&quot;</span>,</span>
<span id="cb232-6"><a href="more-integer-programming-models.html#cb232-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: CRAN&quot;</span>, </span>
<span id="cb232-7"><a href="more-integer-programming-models.html#cb232-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Month&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Downloads&quot;</span>) </span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-45"></span>
<img src="OMUR_files/figure-html/unnamed-chunk-45-1.png" alt="Monthly Downloads of ompr" width="960" />
<p class="caption">
FIGURE 7.6: Monthly Downloads of ompr
</p>
</div>
<p>Let’s close this section by examining the popularity of <code>ompr</code> itself.<br />
</p>
<p>Clearly a wide range of optimization tools can be used. Let’s return to optimization formulations with a more entertaining application.<br />
</p>
</div>
</div>
<div id="solving-sudoku-puzzles-using-optimization" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Solving Sudoku Puzzles using Optimization</h2>
<div id="introduction-to-sudoku-and-optimization" class="section level3" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Introduction to Sudoku and Optimization</h3>
<blockquote>
Would you like to play a game?
<footer>
— Joshua (Wargames-1983)
</footer>
</blockquote>
<p><img src="OMUR_files/figure-html/First_Sudoku-1.png" width="672" /></p>
<p>After spending a significant amount of time and CPU cycles on the serious topic of warehouse optimization, let’s take a break with a more lighthearted application of the classic Sudoku puzzle game.
For those unfamiliar with Sukoku, the core idea is to fill a 9 by 9 grid, using every digit from 1-9 once in each column, once in each row, and once in each 3x3 cluster. A limited number of “hints” are provided in terms of digits that are shown, often around 20 to 30 digits. Feel free to work on this Sudoku puzzle hand.<br />
</p>
<p>Using optimization, you can solve this or any other Sudoku model!<br />
</p>
<p>This section is based on an article by Dirk Schumacher and helper functions from the ‘SudokuAlt’ package from Bill Venables, one of the Godfathers of R.
Let’s start with Dirk’s explanation, with permission, of the model.
</p>
<blockquote>
<p>In this vignette we will solve Sudoku puzzles using MILP.
<a href="https://en.wikipedia.org/wiki/Sudoku">Sudoku</a> in its most popular form is a constraint satisfaction problem and by setting the objective function to <span class="math inline">\(0\)</span> you transform the optimization problem into a pure constraint satistication problem.
In this document we will consider Sudokus in a 9x9 grid with 3x3 sub-matrices.<br />
Of course you can formulate an objective function as well that directs the solver towards solutions maximizing a certain linear function.<br />
The idea is to introduce a binary variable <span class="math inline">\(x\)</span> with three indexes <span class="math inline">\(i, j, k\)</span> that is <span class="math inline">\(1\)</span> if and only if the number <span class="math inline">\(k\)</span> is in cell <span class="math inline">\(i, j\)</span>.</p>
</blockquote>
</div>
<div id="formulating-the-sudoku-problem" class="section level3" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Formulating the Sudoku Problem</h3>
<p>The basic optimization formulation is interesting for a few reasons.</p>
<p>First, there isn’t a clear objective function.
We are simply trying to find a a set of values that solves the problem without violating any of the rules of Sudoku.
In other words, any feasible solution would be acceptable. As Dirk Schumacher stated, this is technically a constraint satisfaction problem rather than optimization because there is no objective function to optimize. Having said that, our tools of optimization are still useful. </p>
<p>We could minimize <span class="math inline">\(x_{1,1,1}\)</span>, the sum of all decision variables (which would be 81, corresponding to the number of cells in the Sudoku grid.) We could also just tell it to maximize a particular number, say 42, or minimize another number like 0, which is exactly what Dirk did.<br />
</p>
<p>In building our constraints, it is easy to get overwhelmed as we have not used a triple subscripted variable before. Let’s start by focusing on just the top left corner cell (<span class="math inline">\(i=1;j=1\)</span>). If this cell were to have the digit 1, then that would mean <span class="math inline">\(x_{1,1,1}=1\)</span>. If that cell holds a 2, then <span class="math inline">\(x_{1,1,2}=1\)</span>. If it holds a 3, then <span class="math inline">\(x_{1,1,3}=1\)</span> and so on up to the ninth digit, <span class="math inline">\(x_{1,1,9}=1\)</span>. We know that it cell must have one and only one digit. Therefore, for this top left cell, we can just add up all of the digit possibilities for that cell and set it equal to one.<br />
</p>
<p><span class="math display">\[
\begin {split}
\begin {aligned}
&amp;x_{1,1,1}+x_{1,1,2}+x_{1,1,3}+\\
&amp;x_{1,1,4}+x_{1,1,5}+x_{1,1,6}+\\
&amp;x_{1,1,7}+x_{1,1,8}+x_{1,1,9} &amp;= 1 \\
\end {aligned}
\end {split}
\]</span>
Rather than writing out each possibility, we can instead use a summation for every digit, <em>k</em>.<br />
</p>
<p><span class="math display">\[\sum\limits_{k=1}^{9}   x_{1,1,k} = 1\]</span></p>
<p>This would still entail writing a similar constraint for each of the other 80 cells such as (<span class="math inline">\(i=1;j=2\)</span>), (<span class="math inline">\(i=1;j=3\)</span>), and so on. Instead, this is a perfect opportunity to use the <span class="math inline">\(\forall\)</span> to repeat this for all values of <em>i</em> and <em>j</em>.<br />
</p>
<p><span class="math display">\[\sum\limits_{k=1}^{9}   x_{i,j,k} = 1, \; \forall i,j\]</span></p>
<p>We then need to ensure that in each row, <span class="math inline">\(i\)</span>, each digit <span class="math inline">\(k\)</span> only appears in one of the columns.<br />
</p>
<p><span class="math display">\[\sum\limits_{i=1}^{9}   x_{i,j,k} = 1, \; \forall j,k\]</span></p>
<p>We then need to ensure that in each column, <span class="math inline">\(j\)</span>, each digit only appears in of the rows.<br />
</p>
<p><span class="math display">\[\sum\limits_{j=1}^{9}   x_{i,j,k} = 1, \; \forall i,k\]</span></p>
<p>Next, we need to create a constraint for each 3x3 grouping so that it contains each digit only once.
This is more complicated. Let’s consider the top left 3x3 cluster. For each digit <span class="math inline">\(k\)</span>, we need to ensure that only one cell has it.<br />
</p>
<p><span class="math display">\[
\begin {split}
\begin {aligned}
&amp;x_{1,1,k}+x_{1,2,k}+x_{1,3,k}+\\
&amp;x_{2,1,k}+x_{2,2,k}+x_{2,3,k}+\\
&amp;x_{3,1,k}+x_{3,2,k}+x_{3,3,k} &amp;= 1, \; \forall \; k \\
\end {aligned}
\end {split}
\]</span></p>
<p>Let’s generalize this by using summations.<br />
</p>
<p><span class="math display">\[
\begin {split}
\begin {aligned}
\sum\limits_{i=1}^{3} \sum\limits_{j=1}^{3}x_{i,j,k} = 1 , \; k=1 ,\ldots, 9\\
\end {aligned}
\end {split}
\]</span></p>
<p>Unfortunately this set of constraints only covers one cluster.<br />
</p>
<p>If we are clever, we may note that the top left corner of each cluster is a row or column value of 1, 4, or 7.<br />
</p>
<p>We could extend this constraint to handle each set of clusters. We’ll use a counter across for each cluster by row, using <span class="math inline">\(r\)</span>. Similarly, we’ll use <span class="math inline">\(c\)</span> for cluster.<br />
</p>
<p><span class="math display">\[
\begin {split}
\begin {aligned}
\sum\limits_{i=1+3r}^{3+3r} \sum\limits_{j=1+3c}^{3+3c}x_{i,j,k} = 1, 
                     \; k=1 ,\ldots, 9 
                     \; r=0,1,2,  \; c=0,1,2, \\
\end {aligned}
\end {split}
\]</span></p>
<p>We can now pull everything together into a single formulation.
Again, remember that we could use <em>any</em> objective function since we are simply trying to find a feasible solution.
We will just picking maximizing the number zero since <code>ompr</code> defaults to maximization as an objective function.
We could also tell a solver such as <code>symphony</code> to just find a first feasible solution and terminate.<br />
</p>
<p><span class="math display">\[
\begin{split}
\begin{aligned}
\text{max   } \; &amp; 0  \\
\text{s.t.: } \; &amp; \sum\limits_{k=1}^{9}   x_{i,j,k} = 1  
                                  &amp; i=1,\ldots, n, \; j=1 ,\ldots, n\\
                      &amp; \sum\limits_{i=1}^{n}   x_{i,j,k} = 1  
                                  &amp; j=1,\ldots, n, \; k=1 ,\ldots, 9\\
                      &amp; \sum\limits_{j=1}^{n}   x_{i,j,k} = 1  
                                  &amp; i=1,\ldots, n, \; k=1 ,\ldots, 9\\
&amp;\sum\limits_{i=1+r}^{3+r} \; \sum\limits_{j=1+c}^{3+c}x_{i,j,k} = 1, 
                     \; &amp; k=1 ,\ldots, 9 
                     \; r=0,3,6,  \; c=0,3,6, \\
                 &amp;  x_{i,j,k} \in \{0,1\} \; &amp;i=1 ,\ldots, n, \;  
                     j=1 ,\ldots, n, \;  k=1 ,\ldots, 9\\
  \end{aligned}
  \end{split}
\]</span></p>
</div>
<div id="implementing-sudoku-in-ompr" class="section level3" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> Implementing Sudoku in ompr</h3>
<p>We are now ready to implement the model. As always, clearly defining variables and constraints is important. A triple subscripted variable often makes for a tricky model to both formulate and implement. Also, that last constraint may take careful examination.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="more-integer-programming-models.html#cb233-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb233-2"><a href="more-integer-programming-models.html#cb233-2" aria-hidden="true" tabindex="-1"></a>Sudoku_model <span class="ot">&lt;-</span> <span class="fu">MIPModel</span>() <span class="sc">|&gt;</span></span>
<span id="cb233-3"><a href="more-integer-programming-models.html#cb233-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb233-4"><a href="more-integer-programming-models.html#cb233-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The number k stored in position i,j</span></span>
<span id="cb233-5"><a href="more-integer-programming-models.html#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_variable</span>(Vx[i, j, k], <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">k =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, </span>
<span id="cb233-6"><a href="more-integer-programming-models.html#cb233-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">&quot;binary&quot;</span>)    <span class="sc">|&gt;</span></span>
<span id="cb233-7"><a href="more-integer-programming-models.html#cb233-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb233-8"><a href="more-integer-programming-models.html#cb233-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># no objective</span></span>
<span id="cb233-9"><a href="more-integer-programming-models.html#cb233-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_objective</span>(<span class="dv">0</span>)                 <span class="sc">|&gt;</span></span>
<span id="cb233-10"><a href="more-integer-programming-models.html#cb233-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb233-11"><a href="more-integer-programming-models.html#cb233-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># only one number can be assigned per cell</span></span>
<span id="cb233-12"><a href="more-integer-programming-models.html#cb233-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(<span class="fu">sum_expr</span>(Vx[i, j, k], <span class="at">k =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb233-13"><a href="more-integer-programming-models.html#cb233-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>n) <span class="sc">|&gt;</span></span>
<span id="cb233-14"><a href="more-integer-programming-models.html#cb233-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb233-15"><a href="more-integer-programming-models.html#cb233-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># each number is exactly once in a row</span></span>
<span id="cb233-16"><a href="more-integer-programming-models.html#cb233-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(<span class="fu">sum_expr</span>(Vx[i, j, k], <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>n) <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb233-17"><a href="more-integer-programming-models.html#cb233-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">k =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb233-18"><a href="more-integer-programming-models.html#cb233-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb233-19"><a href="more-integer-programming-models.html#cb233-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># each number is exactly once in a column</span></span>
<span id="cb233-20"><a href="more-integer-programming-models.html#cb233-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(<span class="fu">sum_expr</span>(Vx[i, j, k], <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span>n) <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb233-21"><a href="more-integer-programming-models.html#cb233-21" aria-hidden="true" tabindex="-1"></a>                 <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span>n, <span class="at">k =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">|&gt;</span> </span>
<span id="cb233-22"><a href="more-integer-programming-models.html#cb233-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb233-23"><a href="more-integer-programming-models.html#cb233-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># each 3x3 square must have all numbers</span></span>
<span id="cb233-24"><a href="more-integer-programming-models.html#cb233-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(<span class="fu">sum_expr</span>(Vx[i, j, k], <span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">+</span> r, </span>
<span id="cb233-25"><a href="more-integer-programming-models.html#cb233-25" aria-hidden="true" tabindex="-1"></a>                          <span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">+</span> c) <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb233-26"><a href="more-integer-programming-models.html#cb233-26" aria-hidden="true" tabindex="-1"></a>                 <span class="at">r =</span> <span class="fu">seq</span>(<span class="dv">0</span>, n <span class="sc">-</span> <span class="dv">3</span>, <span class="dv">3</span>), </span>
<span id="cb233-27"><a href="more-integer-programming-models.html#cb233-27" aria-hidden="true" tabindex="-1"></a>                 <span class="at">c =</span> <span class="fu">seq</span>(<span class="dv">0</span>, n <span class="sc">-</span> <span class="dv">3</span>, <span class="dv">3</span>), <span class="at">k =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb233-28"><a href="more-integer-programming-models.html#cb233-28" aria-hidden="true" tabindex="-1"></a>Sudoku_model</span></code></pre></div>
<pre><code>## Mixed integer linear optimization problem
## Variables:
##   Continuous: 0 
##   Integer: 0 
##   Binary: 729 
## Model sense: maximize 
## Constraints: 324</code></pre>
<p>We will use <code>glpk</code> to solve the above model.
Note that we haven’t fixed any numbers to specific values.
That means that the solver will find a valid Sudoku without any prior hints.<br />
</p>
<p>I’ve made a couple of minor changes to Dirk’s code chunks.
In the implementation, I replaced the <code>x</code> variable in <code>ompr</code> with <code>Vx</code> to avoid R name space collisions with previously defined R data structures named <code>x</code> in my environment. Secondly, I switch the <code>sx</code> and <code>sy</code> to <code>r</code> and <code>c</code> to represent moving over by rows and columns in the tricky last constraint for clusters.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="more-integer-programming-models.html#cb235-1" aria-hidden="true" tabindex="-1"></a>Sudoku_result <span class="ot">&lt;-</span> <span class="fu">solve_model</span>(</span>
<span id="cb235-2"><a href="more-integer-programming-models.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  Sudoku_model, <span class="fu">with_ROI</span>(</span>
<span id="cb235-3"><a href="more-integer-programming-models.html#cb235-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">solver =</span> <span class="st">&quot;glpk&quot;</span>, <span class="at">verbose =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.47
## 324 rows, 729 columns, 2916 non-zeros
##       0: obj =  0.000000000e+000  infeas = 3.240e+002 (324)
##     500: obj =  0.000000000e+000  infeas = 2.000e+001 (79)
## *   520: obj =  0.000000000e+000  infeas = 4.644e-014 (75)
## OPTIMAL SOLUTION FOUND
## GLPK Integer Optimizer, v4.47
## 324 rows, 729 columns, 2916 non-zeros
## 729 integer variables, all of which are binary
## Integer optimization begins...
## +   520: mip =     not found yet &lt;=              +inf        (1; 0)
## +  1414: &gt;&gt;&gt;&gt;&gt;  0.000000000e+000 &lt;=  0.000000000e+000   0.0% (43; 0)
## +  1414: mip =  0.000000000e+000 &lt;=     tree is empty   0.0% (0; 85)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="more-integer-programming-models.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the following dplyr statement plots a 9x9 matrix</span></span>
<span id="cb237-2"><a href="more-integer-programming-models.html#cb237-2" aria-hidden="true" tabindex="-1"></a>Solution <span class="ot">&lt;-</span> Sudoku_result <span class="sc">|&gt;</span> </span>
<span id="cb237-3"><a href="more-integer-programming-models.html#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_solution</span>(Vx[i,j,k]) <span class="sc">|&gt;</span></span>
<span id="cb237-4"><a href="more-integer-programming-models.html#cb237-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(value <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb237-5"><a href="more-integer-programming-models.html#cb237-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(i, j, k) <span class="sc">|&gt;</span> </span>
<span id="cb237-6"><a href="more-integer-programming-models.html#cb237-6" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(j, k) <span class="sc">|&gt;</span> </span>
<span id="cb237-7"><a href="more-integer-programming-models.html#cb237-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>i)</span></code></pre></div>
<p>If you want to solve a specific Sudoku you can fix certain cells to specific values.
For example here we solve a Sudoku that has the sequence from 1 to 9 in the first 3x3 matrix fixed.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="more-integer-programming-models.html#cb238-1" aria-hidden="true" tabindex="-1"></a>Sudoku_model_specific <span class="ot">&lt;-</span> Sudoku_model <span class="sc">|&gt;</span> </span>
<span id="cb238-2"><a href="more-integer-programming-models.html#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb238-3"><a href="more-integer-programming-models.html#cb238-3" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Set digit in top left to the number 1</span></span>
<span id="cb238-4"><a href="more-integer-programming-models.html#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb238-5"><a href="more-integer-programming-models.html#cb238-5" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Set digit in row 1, column 2 to the number 2</span></span>
<span id="cb238-6"><a href="more-integer-programming-models.html#cb238-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb238-7"><a href="more-integer-programming-models.html#cb238-7" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Set digit in row 1, column 3 to the number 3</span></span>
<span id="cb238-8"><a href="more-integer-programming-models.html#cb238-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb238-9"><a href="more-integer-programming-models.html#cb238-9" aria-hidden="true" tabindex="-1"></a>     <span class="co"># Set digit in row 2, column 1 to the number 4</span></span>
<span id="cb238-10"><a href="more-integer-programming-models.html#cb238-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">5</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  <span class="co"># etc....</span></span>
<span id="cb238-11"><a href="more-integer-programming-models.html#cb238-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">6</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb238-12"><a href="more-integer-programming-models.html#cb238-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">7</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb238-13"><a href="more-integer-programming-models.html#cb238-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">8</span>] <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb238-14"><a href="more-integer-programming-models.html#cb238-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_constraint</span>(Vx[<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">9</span>] <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb238-15"><a href="more-integer-programming-models.html#cb238-15" aria-hidden="true" tabindex="-1"></a>Sudoku_result_specific <span class="ot">&lt;-</span> <span class="fu">solve_model</span>(</span>
<span id="cb238-16"><a href="more-integer-programming-models.html#cb238-16" aria-hidden="true" tabindex="-1"></a>  Sudoku_model_specific, <span class="fu">with_ROI</span>(</span>
<span id="cb238-17"><a href="more-integer-programming-models.html#cb238-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">solver =</span> <span class="st">&quot;glpk&quot;</span>, <span class="at">verbose =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## &lt;SOLVER MSG&gt;  ----
## GLPK Simplex Optimizer, v4.47
## 333 rows, 729 columns, 2925 non-zeros
##       0: obj =  0.000000000e+000  infeas = 3.330e+002 (333)
## *   477: obj =  0.000000000e+000  infeas = 2.015e-015 (84)
## OPTIMAL SOLUTION FOUND
## GLPK Integer Optimizer, v4.47
## 333 rows, 729 columns, 2925 non-zeros
## 729 integer variables, all of which are binary
## Integer optimization begins...
## +   477: mip =     not found yet &lt;=              +inf        (1; 0)
## +   980: &gt;&gt;&gt;&gt;&gt;  0.000000000e+000 &lt;=  0.000000000e+000   0.0% (31; 0)
## +   980: mip =  0.000000000e+000 &lt;=     tree is empty   0.0% (0; 61)
## INTEGER OPTIMAL SOLUTION FOUND
## &lt;!SOLVER MSG&gt; ----</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="more-integer-programming-models.html#cb240-1" aria-hidden="true" tabindex="-1"></a>Solution_specific <span class="ot">&lt;-</span> Sudoku_result_specific <span class="sc">|&gt;</span> </span>
<span id="cb240-2"><a href="more-integer-programming-models.html#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_solution</span>(Vx[i,j,k]) <span class="sc">|&gt;</span></span>
<span id="cb240-3"><a href="more-integer-programming-models.html#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(value <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb240-4"><a href="more-integer-programming-models.html#cb240-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(i, j, k) <span class="sc">|&gt;</span> </span>
<span id="cb240-5"><a href="more-integer-programming-models.html#cb240-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">spread</span>(j, k) <span class="sc">|&gt;</span> </span>
<span id="cb240-6"><a href="more-integer-programming-models.html#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>i) </span></code></pre></div>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="more-integer-programming-models.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span> (Solution_specific)   <span class="co"># Display solution to Sudoku Puzzle</span></span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
1
</th>
<th style="text-align:right;">
2
</th>
<th style="text-align:right;">
3
</th>
<th style="text-align:right;">
4
</th>
<th style="text-align:right;">
5
</th>
<th style="text-align:right;">
6
</th>
<th style="text-align:right;">
7
</th>
<th style="text-align:right;">
8
</th>
<th style="text-align:right;">
9
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>Now, let’s try printing it nicely using the <code>sudokuAlt</code> package from Bill Venables, available from CRAN.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="more-integer-programming-models.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.sudoku</span>(<span class="fu">as.matrix</span>(Solution_specific, <span class="at">colGame=</span><span class="st">&quot;grey&quot;</span>)))</span></code></pre></div>
<p><img src="OMUR_files/figure-html/printing_sudoku_solution_margin-1.png" width="672" /></p>
<p>Have at it.
Any Sudoku puzzle can be solved using this model as long as there is a feasible solution.
Note that if there are two or more solutions to the puzzle based on the hints, this model will find one of them and does not indicate whether there might be other solutions.
</p>
<p>Feel free to time the solution using the <code>tictoc</code> package.<br />
</p>
<p>The intention here is not to imply that optimization is the only way or the best way to solve Sudoku problems.
There are algorithmic approaches for solving Sudoku that can be more computationally efficient than using a general purpose integer programming system and in fact people have implemented such algorithms in R and other languages.
The purpose of this example was to show how a nontraditional problem can be framed and implemented.</p>
</div>
<div id="sudoku-discussion" class="section level3" number="7.4.4">
<h3><span class="header-section-number">7.4.4</span> Sudoku Discussion</h3>
<p>In this chapter, we covered some problems with medium-sized integer programming problems.
The same approaches and models can be scaled up to larger problems.<br />
</p>
<p>Improvements in software and computer hardware have opened up optimization to a variety of large scale problems.
Integrating this into R has made it straightforward to connect together a variety of tools including simulation and data visualization.</p>
</div>
</div>
<div id="exercises-4" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Exercises</h2>
<p>Even moderate sized integer programming problems can result in significant computational loads.
While these problems will not represent a heavy load for a desktop or laptop computer, they be intensive for netbooks or cloud-based services.
If you are using a cloud-based service such as RStudio.cloud, a server, or third party service such as Amazon Web Services, be sure to understand the implications of heavy computational loads.
Possible results of excessive use of third party computer time include throttling of access similar to cell phone users exceeding monthly data caps, high “overage” charges, a warning from a systems administrator, or even account termination.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-35" class="exercise"><strong>Exercise 7.1  (Warehouse-Max Customers-Small) </strong></span>Run the analysis for the smaller warehouse optimization but with just 10 customers and 3 warehouses.
Extend the warehouse customer assignment problem to have each warehouse that is built be assigned a maximum of 4 customers.
Compare the solution to that obtained earlier.
Ensure that your data for customers and warehouses is the same for the two cases.</p>
<p>This problem size should be cloud-friendly but ensure that you are solving the appropriate sized problem before running.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-36" class="exercise"><strong>Exercise 7.2  (Warehouse-Max and Min Customers-Small) </strong></span>Run the analysis for the smaller warehouse optimization but with just 10 customers and 3 warehouses.
Extend and solve the warehouse customer assignment problem to have each warehouse that is built be assigned a maximum of 4 customers and a minimum of 2 customers.
Show plots of both solutions.
Compare the solution to that obtained earlier using tables as appropriate.
Ensure that your data for customers and warehouses is the same for the two cases.<br />
</p>
<p>This problem size should be cloud-friendly but ensure that you are solving the appropriate sized problem before running.<br />
</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-37" class="exercise"><strong>Exercise 7.3  (Warehouse-Simulating Customers-Moderate) </strong></span>Run the analysis for the smaller warehouse optimization with a max of 10 customers and 3 warehouses.
Simulate it 20 times and plot the results in terms of number of warehouses used and the total cost.
Discuss the results.<br />
</p>
<p>This problem size should not be be run on a cloud or remote server without full understanding of load implications.
Note that this will be somewhat computationally intensive and is best done on a local computer rather than the cloud.
Doing it on a personal computer may require on the order of five minutes of processing time.<br />
</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-38" class="exercise"><strong>Exercise 7.4  (Warehouse-Max Customers-Big) </strong></span>Extend the warehouse customer assignment problem to have each warehouse that is built be assigned a maximum of 40 customers.
Compare the solution to that obtained earlier.
Ensure that your data for customers and warehouses is the same for the two cases.
This problem size should not be be run on a cloud or remote server without full understanding of load implications.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-39" class="exercise"><strong>Exercise 7.5  (Warehouse-Max and Min Customers-Big) </strong></span>Extend the warehouse customer assignment problem to have each warehouse that is built be assigned a maximum of 40 customers and a minimum of 15 customers.
Compare the solution to that obtained earlier.
Ensure that your data for customers and warehouses is the same for the two cases.
This problem size should not be be run on a cloud or remote server without full understanding of load implications.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-40" class="exercise"><strong>Exercise 7.6  (Warehouse-Simulating Customers-Big) </strong></span>Run the analysis for the warehouse optimization model 20 times and plot the results in terms of number of warehouses used and the total cost.
Discuss and interpret the results.
Note that this will be <strong>computationally intensive</strong> and should not be done on the cloud.
Doing it on a personal computer may require on the order of five minutes of processing time.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-41" class="exercise"><strong>Exercise 7.7  (Sudoku-First Puzzle) </strong></span>Solve the Sudoku puzzle from the beginning of this section using R.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-42" class="exercise"><strong>Exercise 7.8  (Sudoku-Bottom Row) </strong></span>Solve a Sudoku model using optimization where the bottom row is 9 numbered down to 1.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-43" class="exercise"><strong>Exercise 7.9  (Sudoku-Right Column) </strong></span>Solve a Sudoku model using optimization where the rightmost column is 9 numbered down to 1.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-44" class="exercise"><strong>Exercise 7.10  (Sudoku-Center Cluster) </strong></span>Solve a Sudoku model using optimization where the center 3x3 cluster is made up of the numbers from 9 to 1.
(First row is 9, 8, 7; second row is 6, 5, 4; bottom row is 3, 2, 1)</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-45" class="exercise"><strong>Exercise 7.11  (Find a Sudoku to Solve) </strong></span>Find a Sudoku puzzle from a newspaper or elsewhere and solve it using optimization.<br />
</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-46" class="exercise"><strong>Exercise 7.12  (Sudoku-First Puzzle) </strong></span>Solve the Sudoku problem from the beginning of this section.</p>
<p><img src="OMUR_files/figure-html/First_Sudoku-exercise-1.png" width="672" /></p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-47" class="exercise"><strong>Exercise 7.13  (Sudoku-Multiple Optima) </strong></span><strong>Challenge:</strong> Sudoku puzzles are created with the intention of having a single solution since the approaches people use to solve them are based on incrementally reasoning out what values each cell must contain.
The result is that the ambiguity of multiple optima may cause problems for people to solve.
While the optimization model can solve these without difficulty, it is only going to find one, arbitrary solution.
Simply resolving is likely to give you the same solution even when there are multiple optima.
Consider variations and apply them to find multiple solutions to a problem.
For an example of one with multiple optimal solutions, the most extreme case would be starting with a blank board.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-48" class="exercise"><strong>Exercise 7.14  (Sudoku-Infeasible) </strong></span><strong>Challenge:</strong> A Sudoku puzzle with only a few numbers shown can be infeasible even though it does not contain any obvious violation of repeated digits.
People building Sudoku puzzles need to ensure that every puzzle is solvable or risk having frustrated customers.
Add a digit one at a time to an existing Sudoku puzzle board that does not immediately violate the repeated digits requirement, test for a valid solution, and repeat, until the Sudoku game board becomes infeasible.</p>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-49" class="exercise"><strong>Exercise 7.15  (Sudoku-4x4) </strong></span><strong>Ultra-Challenge:</strong> Solve a 16 letter Sudoku puzzle using R.
It consists of 4x4 grids and uses the letters starting with A in place of numbers.</p>
<p><img src="OMUR_files/figure-html/Sudoku_exercise_4x4-1.png" width="672" /></p>
</div>
</div>
<div id="production-planning-over-time" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Production Planning over Time</h2>
<p>Let’s revisit our drone manufacturing example but accounting for time. In this case, we’ll look at producing ants and bats over time while accounting for with varying weekly demand, inventory carrying costs, setup costs, marginal production costs, and beginning inventory. The planning horizon is four weeks.</p>
<p>Let’s start by by showing the data.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="more-integer-programming-models.html#cb243-1" aria-hidden="true" tabindex="-1"></a>nTime <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb243-2"><a href="more-integer-programming-models.html#cb243-2" aria-hidden="true" tabindex="-1"></a>mDemandA <span class="ot">&lt;-</span> <span class="dv">150</span>  <span class="co"># Used for generating demand</span></span>
<span id="cb243-3"><a href="more-integer-programming-models.html#cb243-3" aria-hidden="true" tabindex="-1"></a>mDemandB <span class="ot">&lt;-</span> <span class="dv">250</span>  <span class="co">#  Upper limit for random number generator</span></span>
<span id="cb243-4"><a href="more-integer-programming-models.html#cb243-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-5"><a href="more-integer-programming-models.html#cb243-5" aria-hidden="true" tabindex="-1"></a>demA <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">round</span>(<span class="fu">runif</span>(nTime)<span class="sc">*</span>mDemandA))   </span>
<span id="cb243-6"><a href="more-integer-programming-models.html#cb243-6" aria-hidden="true" tabindex="-1"></a>demB <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">round</span>(<span class="fu">runif</span>(nTime)<span class="sc">*</span>mDemandB))</span>
<span id="cb243-7"><a href="more-integer-programming-models.html#cb243-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-8"><a href="more-integer-programming-models.html#cb243-8" aria-hidden="true" tabindex="-1"></a>beg_invA <span class="ot">&lt;-</span> <span class="dv">71</span>; beg_invB <span class="ot">&lt;-</span> <span class="dv">98</span>  <span class="co"># Inv at beginning of week 1</span></span>
<span id="cb243-9"><a href="more-integer-programming-models.html#cb243-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-10"><a href="more-integer-programming-models.html#cb243-10" aria-hidden="true" tabindex="-1"></a>fcostA <span class="ot">&lt;-</span> <span class="dv">80</span>; fcostB <span class="ot">&lt;-</span> <span class="dv">140</span>  <span class="co"># Setup cost for product </span></span>
<span id="cb243-11"><a href="more-integer-programming-models.html#cb243-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-12"><a href="more-integer-programming-models.html#cb243-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-13"><a href="more-integer-programming-models.html#cb243-13" aria-hidden="true" tabindex="-1"></a>invcostA <span class="ot">&lt;-</span> <span class="fl">1.5</span>; invcostB <span class="ot">&lt;-</span> <span class="fl">2.0</span> <span class="co"># Weekly carry cost per unit</span></span>
<span id="cb243-14"><a href="more-integer-programming-models.html#cb243-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-15"><a href="more-integer-programming-models.html#cb243-15" aria-hidden="true" tabindex="-1"></a>prodcostA <span class="ot">&lt;-</span> <span class="dv">10</span>; prodcostB <span class="ot">&lt;-</span> <span class="dv">11</span> <span class="co"># Marginal production cost of A</span></span>
<span id="cb243-16"><a href="more-integer-programming-models.html#cb243-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-17"><a href="more-integer-programming-models.html#cb243-17" aria-hidden="true" tabindex="-1"></a>lmaxinv <span class="ot">&lt;-</span> <span class="dv">400</span>  <span class="co"># Maximum combined inventory</span></span>
<span id="cb243-18"><a href="more-integer-programming-models.html#cb243-18" aria-hidden="true" tabindex="-1"></a>lmaxpro <span class="ot">&lt;-</span> <span class="dv">600</span>  <span class="co"># Maximum combined production</span></span></code></pre></div>
<p>Our demand over time for Ants and Bat is then the following.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-48">TABLE 7.8: </span>Product Demand over Time
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Week 1
</th>
<th style="text-align:right;">
Week 2
</th>
<th style="text-align:right;">
Week 3
</th>
<th style="text-align:right;">
Week 4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
demA
</td>
<td style="text-align:right;">
120
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
133
</td>
<td style="text-align:right;">
128
</td>
</tr>
<tr>
<td style="text-align:left;">
demB
</td>
<td style="text-align:right;">
209
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
128
</td>
</tr>
</tbody>
</table>
<p>Our goal is to create a production plan that will meet all demand at the lowest total cost.</p>
<p>Let’s start by defining our data. Instead of Ants and Bats, we’ll abbreviate it to just A and B.</p>
<p><strong>Data:</strong></p>
<ul>
<li><span class="math inline">\(C^I_A\)</span> = The weekly inventory carrying cost for each Ant carried from one week to the next.</li>
<li><span class="math inline">\(C^I_B\)</span> = The weekly inventory carrying cost for each Bats carried from one week to the next.</li>
<li><span class="math inline">\(C^P_A\)</span> = The marginal production cost for each Ant.</li>
<li><span class="math inline">\(C^P_B\)</span> = The marginal production cost for each Bat.</li>
<li><span class="math inline">\(C^S_A\)</span> = The setup cost for producing Ants in any given week.</li>
<li><span class="math inline">\(C^S_B\)</span> = The setup cost for producing Bats in any given week.</li>
<li><span class="math inline">\(B^I_A\)</span> = Inventory of Ants at the beginning of week 1.</li>
<li><span class="math inline">\(B^I_B\)</span> = Inventory of Bats at the beginning of week 1.</li>
<li><span class="math inline">\(D_{t,A}\)</span> = Demand for Ants in week <em>t</em>.</li>
<li><span class="math inline">\(D_{t,B}\)</span> = Demand for Bats in week <em>t</em>.</li>
<li><span class="math inline">\(L^P\)</span> = Maximum Limit on production of Ants and Bats in any given week.</li>
<li><span class="math inline">\(L^I\)</span> = Limit on maximum inventory of Ants and Bats in any given week.</li>
</ul>
<p><strong>Decision variables:</strong></p>
<ul>
<li><span class="math inline">\(x_{t,A}\)</span> is the number of Ants to make it week <em>t</em>.</li>
<li><span class="math inline">\(x_{t,B}\)</span> is the number of Bats to make it week <em>t</em>.</li>
<li><span class="math inline">\(y_{t,A}=1\)</span> if a setup for Ant production is done in week <em>t</em>; 0 otherwise.</li>
<li><span class="math inline">\(y_{t,B}=1\)</span> if a setup for Bat production is done in week <em>t</em>; 0 otherwise.</li>
<li><span class="math inline">\(z_{t,A}\)</span> is the inventory of Ants at the end of week <em>t</em>.</li>
<li><span class="math inline">\(z_{t,B}\)</span> is the inventory of Bats at the end of week <em>t</em>.</li>
</ul>
<p>Let’s start with some easy relationships. We know that we can’t exceed total production capacity in any given week. All we need to do is add the two production variables in week <em>t</em> together and constrain it to not exceed the production capacity. For week 1, we would have the following:</p>
<p><span class="math display">\[x_{1,A} +x_{1,B} \leq L^P\]</span></p>
<p>We can then generalize this for all weeks in the following manner.</p>
<p><span class="math display">\[x_{t,A} +x_{t,B} \leq L^P, \; \forall t\]</span>
We can then implement an upper limit on total inventory in the same way.</p>
<p><span class="math display">\[z_{t,A} +z_{t,B} \leq L^I, \; \forall t\]</span></p>
<p>A critical concept to understand is the inventory balance. Let’s demonstrated it with Ants and arbitrarily pick week 3. We know that the ending inventory for week 3, <span class="math inline">\(z_{3,A}\)</span> is equal to the inventory from the from the previous week, <span class="math inline">\(z_{2,A}\)</span>, plus amount produced in week 3, <span class="math inline">\(x_{3,A}\)</span>, minus the amount sold (in our case demand), <span class="math inline">\(D_{3,A}\)</span>.</p>
<p><span class="math display">\[z_{3,A}=z_{2,A} + x_{3,A} - D_{3,A}\]</span></p>
<p>The inventory balance constraints follow a similar form for each week other than week 1 so it is straightforward to generalize this to account for other time periods after the initial one, <span class="math inline">\(t=1\)</span>.</p>
<p><span class="math display">\[z_{t,A}=z_{t-1,A} + x_{t,A} - D_{t,A}, \; \forall t&gt;1\]</span></p>
<p>For week 1, the previous inventory is fixed rather than a variable and can be framed as the following.</p>
<p><span class="math display">\[z_{1,A}=B_{A} + x_{1,A} - D_{1,A}\]</span></p>
<p>Next, we need to remember to create a linking constraint for each of decisions of how much to produce with the decision to produce in a given time period. In this case, we know that in any given time period, we have an upper limit on production, <span class="math inline">\(L^P\)</span> so we will use that as our Big M value. For Ants, the constraint then follows this form for each week <em>t</em>.</p>
<p><span class="math display">\[x_{t,A} \leq L^P \cdot y_{t,A} \; \forall \; t\]</span>
The linking constraint for Bats follows the same form.</p>
<p><span class="math display">\[x_{t,B} \leq L^P \cdot y_{t,B} \; \forall \; t\]</span></p>
<p>Our goal is to minimize the total cost. Let’s look at the total cost with respect Ants. It is a combination production cost, setup costs, and carrying costs.</p>
<p><span class="math display">\[
\begin{split}
\begin{aligned}
\text{} \; &amp; \sum\limits_{t=1}^{4}C^P_t\cdot x_{t,A} + C^S_t\cdot y_{t,A} + C^I_t\cdot z_{t,A}\\
\end{aligned}
\end{split}
\]</span></p>
<p>This was just the costs for Ants (A) over time. We can create a similar function for Bats (B) and then since these are costs, we want minimize the sum of the two giving us our objective function.</p>
<p><span class="math display">\[
\begin{split}
\begin{aligned}
\text{min } \;  \sum\limits_{t=1}^{4} (&amp; C^P_A\cdot x_{t,A} + C^S_A\cdot y_{t,A} + C^I_A\cdot z_{t,A}+\\
&amp; C^P_B\cdot x_{t,B} + C^S_B\cdot y_{t,B} + C^I_B\cdot z_{t,B})\\
\end{aligned}
\end{split}
\]</span></p>
<p>Now, let’s create the full formulation.</p>
<p><span class="math display">\[
\begin{split}
\begin{aligned}
\text{min   } \; &amp; \sum\limits_{t=1}^{4} ( C^P_A\cdot x_{t,A} + C^S_A\cdot y_{t,A} + C^I_A\cdot z_{t,A}+\\
                 &amp; C^P_B\cdot x_{t,B} + C^S_B\cdot y_{t,B} + C^I_B\cdot z_{t,B} ) \\
\text{s.t.: } \; &amp; z_{1,A}=B_{A} + x_{1,A} - D_{1,A}\\
                 &amp; z_{1,B}=B_{B} + x_{1,B} - D_{1,B}\\
                 &amp; z_{t,A}=z_{t-1,A} + x_{t,A} - D_{t,A}, \; \forall t&gt;1\\
                 &amp; z_{t,B}=z_{t-1,B} + x_{t,B} - D_{t,B}, \; \forall t&gt;1\\
                 &amp; x_{t,A} + x_{t,B} \leq L^P, \; \forall t\\
                 &amp; z_{t,A} + z_{t,B} \leq L^I, \; \forall t\\
                 &amp; x_{t,A} \leq L^P \cdot y_{t,A} \; \forall t\\
                 &amp; x_{t,B} \leq L^P \cdot y_{t,B} \; \forall t\\
                 &amp; x_{t,A} \; x_{t,A}, \; z_{t,A} \; z_{t,B} \geq 0, \; \forall \; t \\
                 &amp; y_{t,A}, y_{t,B} \; \in \{0,1\} \; \forall \; t\\
\end{aligned}
\end{split}
\]</span></p>
<div id="implementing-the-model-1" class="section level3" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Implementing the Model</h3>
<p>We’ll start by initializing the model and creating the decision variables.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="more-integer-programming-models.html#cb244-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">MIPModel</span>()</span>
<span id="cb244-2"><a href="more-integer-programming-models.html#cb244-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-3"><a href="more-integer-programming-models.html#cb244-3" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_variable</span> (promod, VxA[tt], <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime, </span>
<span id="cb244-4"><a href="more-integer-programming-models.html#cb244-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">lb=</span><span class="dv">0</span>, <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb244-5"><a href="more-integer-programming-models.html#cb244-5" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_variable</span> (promod, VxB[tt], <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime, </span>
<span id="cb244-6"><a href="more-integer-programming-models.html#cb244-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">lb=</span><span class="dv">0</span>, <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb244-7"><a href="more-integer-programming-models.html#cb244-7" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Production volume for products A and B in each time period.</span></span>
<span id="cb244-8"><a href="more-integer-programming-models.html#cb244-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-9"><a href="more-integer-programming-models.html#cb244-9" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_variable</span> (promod, VyA[tt], <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime, <span class="at">type=</span><span class="st">&quot;binary&quot;</span>)</span>
<span id="cb244-10"><a href="more-integer-programming-models.html#cb244-10" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_variable</span> (promod, VyB[tt], <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime, <span class="at">type=</span><span class="st">&quot;binary&quot;</span>)</span>
<span id="cb244-11"><a href="more-integer-programming-models.html#cb244-11" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Setups incurred for each product in each time period.</span></span>
<span id="cb244-12"><a href="more-integer-programming-models.html#cb244-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-13"><a href="more-integer-programming-models.html#cb244-13" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_variable</span> (promod, VzA[tt], <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime, </span>
<span id="cb244-14"><a href="more-integer-programming-models.html#cb244-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">lb=</span><span class="dv">0</span>, <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb244-15"><a href="more-integer-programming-models.html#cb244-15" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_variable</span> (promod, VzB[tt], <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime, </span>
<span id="cb244-16"><a href="more-integer-programming-models.html#cb244-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">lb=</span><span class="dv">0</span>, <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>)</span>
<span id="cb244-17"><a href="more-integer-programming-models.html#cb244-17" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Inventory at end of period for each product.</span></span></code></pre></div>
<p>Now let’s define the objective function.
We are not selling prices</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="more-integer-programming-models.html#cb245-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">set_objective</span>(promod, <span class="fu">sum_expr</span>(prodcostA <span class="sc">*</span> VxA[tt] <span class="sc">+</span> </span>
<span id="cb245-2"><a href="more-integer-programming-models.html#cb245-2" aria-hidden="true" tabindex="-1"></a>                                         prodcostB <span class="sc">*</span> VxB[tt] <span class="sc">+</span> </span>
<span id="cb245-3"><a href="more-integer-programming-models.html#cb245-3" aria-hidden="true" tabindex="-1"></a>                                         fcostA <span class="sc">*</span> VyA [tt] <span class="sc">+</span></span>
<span id="cb245-4"><a href="more-integer-programming-models.html#cb245-4" aria-hidden="true" tabindex="-1"></a>                                         fcostB <span class="sc">*</span> VyB [tt] <span class="sc">+</span></span>
<span id="cb245-5"><a href="more-integer-programming-models.html#cb245-5" aria-hidden="true" tabindex="-1"></a>                                         invcostA <span class="sc">*</span> VzA [tt] <span class="sc">+</span></span>
<span id="cb245-6"><a href="more-integer-programming-models.html#cb245-6" aria-hidden="true" tabindex="-1"></a>                                         invcostB <span class="sc">*</span> VzB [tt],</span>
<span id="cb245-7"><a href="more-integer-programming-models.html#cb245-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">tt=</span><span class="dv">1</span><span class="sc">:</span>nTime),</span>
<span id="cb245-8"><a href="more-integer-programming-models.html#cb245-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">&quot;min&quot;</span>)</span></code></pre></div>
<p>Let’s start with our constraints for linking production, inventory, and demand for the first week.
The inventory at the end of week 1 is simply the beginning inventory at the start of week 1 (<code>beg_invA</code>) plus the amount produced minus the demand.</p>
<p>Note that this assumes all demand must be satisfied in the same week.
This model could be extended to allow for backlogged demand or other variations.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="more-integer-programming-models.html#cb246-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, </span>
<span id="cb246-2"><a href="more-integer-programming-models.html#cb246-2" aria-hidden="true" tabindex="-1"></a>                          beg_invA <span class="sc">+</span> VxA[<span class="dv">1</span>] <span class="sc">-</span> demA [<span class="dv">1</span>] <span class="sc">==</span> VzA[<span class="dv">1</span>] )</span>
<span id="cb246-3"><a href="more-integer-programming-models.html#cb246-3" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, </span>
<span id="cb246-4"><a href="more-integer-programming-models.html#cb246-4" aria-hidden="true" tabindex="-1"></a>                          beg_invB <span class="sc">+</span> VxB[<span class="dv">1</span>] <span class="sc">-</span> demB [<span class="dv">1</span>] <span class="sc">==</span> VzB[<span class="dv">1</span>] )</span></code></pre></div>
<p>This handled the first week.
Now we need to do the same for all of the following weeks.
We take the ending inventory from the previous week, add the new production, and then subtract the demand to give us the ending inventory for both products.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="more-integer-programming-models.html#cb247-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, VzA[tt<span class="dv">-1</span>] <span class="sc">+</span> VxA[tt] <span class="sc">-</span> </span>
<span id="cb247-2"><a href="more-integer-programming-models.html#cb247-2" aria-hidden="true" tabindex="-1"></a>                            demA [tt] <span class="sc">==</span> VzA[tt], <span class="at">tt =</span> <span class="dv">2</span><span class="sc">:</span>nTime )</span>
<span id="cb247-3"><a href="more-integer-programming-models.html#cb247-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-4"><a href="more-integer-programming-models.html#cb247-4" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, VzB[tt<span class="dv">-1</span>] <span class="sc">+</span> VxB[tt] <span class="sc">-</span> </span>
<span id="cb247-5"><a href="more-integer-programming-models.html#cb247-5" aria-hidden="true" tabindex="-1"></a>                            demB [tt] <span class="sc">==</span> VzB[tt], <span class="at">tt =</span> <span class="dv">2</span><span class="sc">:</span>nTime )</span></code></pre></div>
<p>Now we need to use our create our linking constraints to connect our production and decision to produce products.
We will use the Big M method and the maximum production production value as our Big M value.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="more-integer-programming-models.html#cb248-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, VxA [tt] <span class="sc">&lt;=</span> lmaxpro <span class="sc">*</span> VyA[tt], </span>
<span id="cb248-2"><a href="more-integer-programming-models.html#cb248-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt =</span> <span class="dv">1</span><span class="sc">:</span>nTime)</span>
<span id="cb248-3"><a href="more-integer-programming-models.html#cb248-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-4"><a href="more-integer-programming-models.html#cb248-4" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, VxB [tt] <span class="sc">&lt;=</span> lmaxpro <span class="sc">*</span> VyB[tt], </span>
<span id="cb248-5"><a href="more-integer-programming-models.html#cb248-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt =</span> <span class="dv">1</span><span class="sc">:</span>nTime)</span></code></pre></div>
<p>Now let’s put a limit our joint inventory of products.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="more-integer-programming-models.html#cb249-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, VzA[tt] <span class="sc">+</span> VzB[tt] <span class="sc">&lt;=</span> lmaxinv, </span>
<span id="cb249-2"><a href="more-integer-programming-models.html#cb249-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt =</span> <span class="dv">1</span><span class="sc">:</span>nTime)</span></code></pre></div>
<p>Now let’s put a limit our joint production capacity of products.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="more-integer-programming-models.html#cb250-1" aria-hidden="true" tabindex="-1"></a>promod <span class="ot">&lt;-</span> <span class="fu">add_constraint</span> (promod, VzA[tt] <span class="sc">+</span> VzB[tt] <span class="sc">&lt;=</span> lmaxpro, </span>
<span id="cb250-2"><a href="more-integer-programming-models.html#cb250-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt =</span> <span class="dv">1</span><span class="sc">:</span>nTime)</span></code></pre></div>
<p>At this point, let’s look at the size of the problem.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="more-integer-programming-models.html#cb251-1" aria-hidden="true" tabindex="-1"></a>promod</span></code></pre></div>
<pre><code>## Mixed integer linear optimization problem
## Variables:
##   Continuous: 16 
##   Integer: 0 
##   Binary: 8 
## Model sense: minimize 
## Constraints: 24</code></pre>
<p>We are ready to solve.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="more-integer-programming-models.html#cb253-1" aria-hidden="true" tabindex="-1"></a>prores <span class="ot">&lt;-</span> <span class="fu">solve_model</span>(promod, <span class="fu">with_ROI</span>(<span class="at">solver =</span> <span class="st">&quot;glpk&quot;</span>))</span>
<span id="cb253-2"><a href="more-integer-programming-models.html#cb253-2" aria-hidden="true" tabindex="-1"></a>prores<span class="sc">$</span>status</span></code></pre></div>
<pre><code>## [1] &quot;optimal&quot;</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="more-integer-programming-models.html#cb255-1" aria-hidden="true" tabindex="-1"></a>prores<span class="sc">$</span>objective_value</span></code></pre></div>
<pre><code>## [1] 8856.5</code></pre>
<p>We could do some light processing of results for display purposes.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="more-integer-programming-models.html#cb257-1" aria-hidden="true" tabindex="-1"></a>Sol <span class="ot">&lt;-</span> <span class="fu">rbind</span> (</span>
<span id="cb257-2"><a href="more-integer-programming-models.html#cb257-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">as.numeric</span>(<span class="fu">get_solution</span> (prores, VxA[tt])[,<span class="dv">3</span>]))),</span>
<span id="cb257-3"><a href="more-integer-programming-models.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">as.numeric</span>(<span class="fu">get_solution</span> (prores, VxB[tt])[,<span class="dv">3</span>]))),</span>
<span id="cb257-4"><a href="more-integer-programming-models.html#cb257-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">as.numeric</span>(<span class="fu">get_solution</span> (prores, VyA[tt])[,<span class="dv">3</span>]))),</span>
<span id="cb257-5"><a href="more-integer-programming-models.html#cb257-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">as.numeric</span>(<span class="fu">get_solution</span> (prores, VyB[tt])[,<span class="dv">3</span>]))),</span>
<span id="cb257-6"><a href="more-integer-programming-models.html#cb257-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">as.numeric</span>(<span class="fu">get_solution</span> (prores, VzA[tt])[,<span class="dv">3</span>]))),</span>
<span id="cb257-7"><a href="more-integer-programming-models.html#cb257-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">as.numeric</span>(<span class="fu">get_solution</span> (prores, VzB[tt])[,<span class="dv">3</span>]))))</span>
<span id="cb257-8"><a href="more-integer-programming-models.html#cb257-8" aria-hidden="true" tabindex="-1"></a>var_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;$x_{t_A}$&quot;</span>, <span class="st">&quot;$x_{t_B}$&quot;</span>, <span class="st">&quot;$y_{t_A}$&quot;</span>, <span class="st">&quot;$y_{t_B}$&quot;</span>,</span>
<span id="cb257-9"><a href="more-integer-programming-models.html#cb257-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;$z_{t_A}$&quot;</span>, <span class="st">&quot;$z_{t_B}$&quot;</span>) </span>
<span id="cb257-10"><a href="more-integer-programming-models.html#cb257-10" aria-hidden="true" tabindex="-1"></a>Sol <span class="ot">&lt;-</span> <span class="fu">cbind</span>(var_list, Sol)</span>
<span id="cb257-11"><a href="more-integer-programming-models.html#cb257-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Sol) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Variable&quot;</span>, <span class="st">&quot;Week 1&quot;</span>, <span class="st">&quot;Week 2&quot;</span>, <span class="st">&quot;Week 3&quot;</span>, <span class="st">&quot;Week 4&quot;</span>)  </span>
<span id="cb257-12"><a href="more-integer-programming-models.html#cb257-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Sol) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Ant Production&quot;</span>, <span class="st">&quot;Bat Production&quot;</span>,</span>
<span id="cb257-13"><a href="more-integer-programming-models.html#cb257-13" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;Ant Setup&quot;</span>, <span class="st">&quot;Bat Setup&quot;</span>,</span>
<span id="cb257-14"><a href="more-integer-programming-models.html#cb257-14" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;Ant Inventory&quot;</span>, <span class="st">&quot;Bat Inventory&quot;</span>)  </span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-59">TABLE 7.9: </span>Production Planning Over Time
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:left;">
Week 1
</th>
<th style="text-align:left;">
Week 2
</th>
<th style="text-align:left;">
Week 3
</th>
<th style="text-align:left;">
Week 4
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Ant Production
</td>
<td style="text-align:left;">
<span class="math inline">\(x_{t_A}\)</span>
</td>
<td style="text-align:left;">
94
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
133
</td>
<td style="text-align:left;">
128
</td>
</tr>
<tr>
<td style="text-align:left;">
Bat Production
</td>
<td style="text-align:left;">
<span class="math inline">\(x_{t_B}\)</span>
</td>
<td style="text-align:left;">
129
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
156
</td>
<td style="text-align:left;">
128
</td>
</tr>
<tr>
<td style="text-align:left;">
Ant Setup
</td>
<td style="text-align:left;">
<span class="math inline">\(y_{t_A}\)</span>
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Bat Setup
</td>
<td style="text-align:left;">
<span class="math inline">\(y_{t_B}\)</span>
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Ant Inventory
</td>
<td style="text-align:left;">
<span class="math inline">\(z_{t_A}\)</span>
</td>
<td style="text-align:left;">
45
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Bat Inventory
</td>
<td style="text-align:left;">
<span class="math inline">\(z_{t_B}\)</span>
</td>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
</tbody>
</table>
<p>This production planning over time example can be further enhanced in many directions to tailor it to specific applications. Some of the ways that it can be enhanced include the following:</p>
<ul>
<li>Set varying production limits over time.</li>
<li>Set varying minimum inventory levels over time to help guard against variation and stockouts.</li>
<li>Allow for not satisfying all demand</li>
<li>Allow for backlogged inventory.</li>
<li>Generalizing for the number of products.</li>
<li>Simulating varying demand over time for multiple production runs.</li>
<li>Varying demand uncertainty in the future (higher spread in the future).</li>
<li>Increasing the number of products.</li>
</ul>
</div>
</div>
<div id="additional-exercises" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Additional Exercises</h2>
<div class="exercise">
<p><span id="exr:unlabeled-div-50" class="exercise"><strong>Exercise 7.16  (Production Planning) </strong></span>Antenna Engineering has received an order for a key component of 5G base stations from a major telecommunications company.
They must provide 250 products and they have 6 machines that can be used to produce these products.
The machines have differing characteristics described in the following table.</p>
<table>
<caption>Production Planning</caption>
<thead>
<tr class="header">
<th align="right">Machine</th>
<th align="center">Fixed Cost</th>
<th align="center">Variable Cost</th>
<th align="center">Capacity</th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="center">100</td>
<td align="center">2.1</td>
<td align="center">50</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="center">95</td>
<td align="center">2.3</td>
<td align="center">60</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="center">87</td>
<td align="center">2.5</td>
<td align="center">75</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="center">85</td>
<td align="center">2.4</td>
<td align="center">40</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="center">80</td>
<td align="center">2.0</td>
<td align="center">60</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="center">70</td>
<td align="center">2.6</td>
<td align="center">80</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>The goal is to develop a production plan at the lowest possible cost.</p>
<ol style="list-style-type: lower-alpha">
<li>Formulate an explicit mathematical optimization model for this problem using LaTeX in RMarkdown.</li>
<li>Implement and solve your optimization model using <code>ompr</code>.</li>
<li>Interpret the solution to the problem.</li>
<li>Create your own unique variation.</li>
<li>Create your own variation of the above problem by adding a logical relationship between machines that changes the solution.</li>
<li>Explain the modification in terms of the application, implement the change in the model, solve the revised model.</li>
<li>Compare and discuss your solution with respect to the original solution.</li>
<li>Create a generalized algebraic model in LaTeX, implement in <code>ompr</code>, and solve.</li>
<li>Compare results to the explicit model.</li>
</ol>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-51" class="exercise"><strong>Exercise 7.17  (Warehouse Optimization) </strong></span>The warehouse optimization example in chapter 7 had a solution resulting in three warehouses. Assume that you had been responsible for creating the plan and presented the recommendation to the Vice President of Supply Chain Management who stated that they don’t want to pay for the construction of three warehouses and that at most two warehouses should be built.</p>
<ol style="list-style-type: lower-alpha">
<li>Without changing the model and only relying on the information from the book, give your quick response as to how this would affect the solution. (Assume that the VP is unfamiliar with optimization.)</li>
<li>Another employee familiar with optimization overhears your conversation with the VP. Explain your answer succinctly in optimization terms.</li>
<li>Write the constraint(s) to reflect the VP’s suggestion. Write the LaTeX constraint(s) in terms of variables and/or data from the warehouse example in Chapter 7. Explain in your own words how the constraint(s) implement the suggested modification.</li>
<li><em>Challenge:</em> Solve the revised problem.</li>
</ol>
</div>
<div class="exercise">
<p><span id="exr:unlabeled-div-52" class="exercise"><strong>Exercise 7.18  (Chemical Factories) </strong></span>Similar to the Warehouse problem in this chapter, here we have Chemical Factories for which we need to decide the locations. We need to set up 2 factories with 100 residents in the town. The town government is trying to keep the factories at maximum possible distance from the residents to avoid any decrease the impacts and risk of mishaps.</p>
<p>A. Create an appropriate formulation.
B. Taking the randomly generated setup costs for factories similar to warehouses, run the analysis to decide the location for these 2 chemical factories which are
at maximum possible distance from all residents.
C. Discuss the results.</p>
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p>In particular, I recommend using a much smaller problem size (fewer customers and warehouses) if you are using a slow computer or a shared resource such as a server or cloud-based service like RStudio.cloud. Integer programming problems can quickly consume tremendous amounts of computer processing time which can have budgetary impacts or other problems.<a href="more-integer-programming-models.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p><strong>Challenge</strong>: Do you know why about approximately <span class="math inline">\(\frac{1}{m}\)</span> of the decision variables are non-zero?<a href="more-integer-programming-models.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>Note that the data type can sometimes be a source of problems for R users.
You can use the command <code>class(plot_warehouses)</code> to confirm that it is a <code>data.frame</code>.<a href="more-integer-programming-models.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>This topic is not covered in Dirk’s vignette or blog post.<a href="more-integer-programming-models.html#fnref9" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mixed-integer-optimization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="goal-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
